{"version":3,"file":"js/app.9e83df5a.js","mappings":"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","sources":["webpack://actam/./src/App.vue","webpack://actam/./src/App.vue?7ccd","webpack://actam/./src/views/MainHost.vue","webpack://actam/./src/views/Synth/Oscillators/OscHost.vue","webpack://actam/./src/views/Synth/Oscillators/Osc.vue","webpack://actam/./src/views/Synth/Oscillators/MyPolySynth.js","webpack://actam/./src/views/Synth/Oscillators/Osc.vue?83b5","webpack://actam/./src/views/Synth/Oscillators/OscHost.vue?d815","webpack://actam/./src/views/Synth/Filters/FilterHost.vue","webpack://actam/./src/views/Synth/Filters/FilterChain.vue","webpack://actam/./src/views/Synth/Filters/Filter.vue","webpack://actam/./src/views/Synth/Filters/Filter.vue?c1b3","webpack://actam/./src/views/Synth/Filters/FilterChain.vue?d0d3","webpack://actam/./src/views/Synth/Filters/FilterHost.vue?2cd0","webpack://actam/./src/views/Synth/Effects/FxHost.vue","webpack://actam/./src/views/Synth/Effects/FxCell.vue","webpack://actam/./src/views/Synth/Effects/MyFx.js","webpack://actam/./src/views/Synth/Effects/FxCell.vue?8c66","webpack://actam/./src/views/Synth/Effects/FxHost.vue?c3f2","webpack://actam/./src/views/Synth/Tools/ToolsHost.vue","webpack://actam/./src/views/Synth/Tools/Meter.vue","webpack://actam/./src/views/Synth/Tools/Meter.vue?40dd","webpack://actam/./src/views/Synth/Tools/Oscilloscope.vue","webpack://actam/./src/views/Synth/Tools/Oscilloscope.vue?f6a7","webpack://actam/./src/views/Synth/Tools/SpecAnalyzer.vue","webpack://actam/./src/views/Synth/Tools/SpecAnalyzer.vue?01c1","webpack://actam/./src/views/Synth/Tools/ToolsHost.vue?776e","webpack://actam/./src/views/Synth/Modulators/ModHost.vue","webpack://actam/./src/views/Synth/Modulators/Envelope.vue","webpack://actam/./src/views/Synth/Modulators/Envelope.vue?43eb","webpack://actam/./src/views/Synth/Modulators/ModSelector.vue","webpack://actam/./src/views/Synth/Modulators/ModSelector.vue?9635","webpack://actam/./src/views/Synth/Modulators/ModHost.vue?a17d","webpack://actam/./src/views/Synth/Keyboard/PianoKeyboard.vue","webpack://actam/./src/views/Synth/Keyboard/MIDIKeyboard.vue","webpack://actam/./src/views/Synth/Keyboard/MIDIKeyboard.vue?854b","webpack://actam/./src/views/Synth/Keyboard/Octave.vue","webpack://actam/./src/views/Synth/Keyboard/Octave.vue?c297","webpack://actam/./src/views/Synth/Keyboard/PianoKeyboard.vue?3c01","webpack://actam/./src/views/MainHost.vue?2950","webpack://actam/./src/router/index.js","webpack://actam/./src/main.js","webpack://actam/webpack/bootstrap","webpack://actam/webpack/runtime/chunk loaded","webpack://actam/webpack/runtime/compat get default export","webpack://actam/webpack/runtime/define property getters","webpack://actam/webpack/runtime/ensure chunk","webpack://actam/webpack/runtime/get javascript chunk filename","webpack://actam/webpack/runtime/get mini-css chunk filename","webpack://actam/webpack/runtime/global","webpack://actam/webpack/runtime/hasOwnProperty shorthand","webpack://actam/webpack/runtime/load script","webpack://actam/webpack/runtime/make namespace object","webpack://actam/webpack/runtime/publicPath","webpack://actam/webpack/runtime/jsonp chunk loading","webpack://actam/webpack/startup"],"sourcesContent":["<template>\r\n  <nav>\r\n    <router-link to=\"/\">Synth</router-link> |\r\n    <router-link to=\"/about\">About</router-link>\r\n  </nav>\r\n  <router-view />\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  mounted() {\r\n    \r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  height: 100vh;\r\n  margin: auto;\r\n}\r\n\r\nnav {\r\n  width: 100%;\r\n  aspect-ratio: 24/1;\r\n  font-size: 2vw;\r\n  padding-top: 1vw;\r\n}\r\n\r\nnav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\nnav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\ndiv {\r\n  user-select: none;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=0be29b90\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0be29b90&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"appContainer\" @mouseup=\"handleMouseUp\" @mousemove=\"handleMouseMove\">\r\n    <div class=\"mainHost\">\r\n      <OscHost ref=\"oscHost\" @claim=\"handleClaim\" />\r\n      <FilterHost ref=\"filterHost\" @filterInitialized=\"initOscConnections\"/>\r\n      <FxHost  />\r\n      <ToolHost ref=\"toolsHost\" />\r\n      <ModHost\r\n        ref=\"modHost\"\r\n        @initADSR=\"handleInitADSR\"\r\n        @dragging=\"handleDragging\"\r\n      />\r\n      <PianoKeyboard\r\n        ref=\"pianoKeyboard\"\r\n        @noteDown=\"noteDownHandle\"\r\n        @noteUp=\"noteUpHandle\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport OscHost from \"./Synth/Oscillators/OscHost.vue\";\r\nimport FilterHost from \"./Synth/Filters/FilterHost.vue\";\r\nimport FxHost from \"./Synth/Effects/FxHost.vue\";\r\nimport ToolHost from \"./Synth/Tools/ToolsHost.vue\";\r\nimport ModHost from \"./Synth/Modulators/ModHost.vue\"; // Envelope Strip\r\nimport PianoKeyboard from \"./Synth/Keyboard/PianoKeyboard.vue\";\r\nimport { isProxy, toRaw } from \"vue\";\r\n\r\nexport default {\r\n  name: \"mainHost\",\r\n  components: {\r\n    OscHost,\r\n    FilterHost,\r\n    FxHost,\r\n    ToolHost,\r\n    ModHost,\r\n    PianoKeyboard,\r\n  },\r\n  data() {\r\n    return {\r\n      draggedInfo: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    Tone.Transport.start(\"+0.1\")\r\n  },\r\n\r\n  methods: {\r\n    // -------------- INIT ROUTING (connections) ------------\r\n    initOscConnections(){\r\n      this.$refs.oscHost.initConnections()\r\n    },\r\n    initFilterConnections(){\r\n      console.log(\"main host init filter-fx connections\")\r\n      // todo: delete this.$refs.filterHost.initConnections()\r\n    },\r\n    \r\n    handleClaim(info) {\r\n      //TO GLOBALIZE\r\n      if (this.draggedInfo) {\r\n        //sends draggedInfo to claimer of drop\r\n        //console.log(info.path)\r\n        let deleter = info.path[1]\r\n\r\n        this.deleteDraggedInfo(deleter);\r\n      }\r\n    },\r\n    handleDragging(info) {\r\n      //TO DELETE?\r\n\r\n      //handles dragging of modulators\r\n      this.draggedInfo = info;\r\n      //console.log(this.draggedInfo)\r\n    },\r\n    deleteDraggedInfo(source) {\r\n      //TO DELETE?\r\n\r\n      //source is the module/parameter that called the function\r\n      if (this.draggedInfo) {\r\n        console.log(\r\n          \"draggingInfo \" + this.draggedInfo.path[1] + \" deleted by \" + source\r\n        );\r\n        this.draggedInfo = null;\r\n      }\r\n    },\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.$refs.pianoKeyboard.handleMouseUp();\r\n      this.$refs.modHost.handleMouseUp(e);\r\n\r\n      //If something has been dragged and not claimed after 100ms infos are deleted\r\n      if (this.draggedInfo) {\r\n        setTimeout(() => this.deleteDraggedInfo(\"MainHost\"), 100);\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      //console.log(this.$refs.modHost)\r\n      this.$refs.modHost.handleMouseMove(e);\r\n\r\n    },\r\n    noteDownHandle(note) {\r\n      this.$refs[\"toolsHost\"].setOscilloscopeTiming(note);\r\n    },\r\n\r\n\r\n    noteUpHandle(note) {\r\n    },\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.mainHost {\r\n  display: grid; /* no more flex display because we need Env Strip to be longer */\r\n  grid-template-rows: 55% 30% 15%; /* grid display row sizes*/\r\n  grid-template-columns: 20% 50% 30%; /*  ...   ...   column sizes fr is like unit */\r\n  width: 100%;\r\n  justify-content: center;\r\n  aspect-ratio: 4 / 3;\r\n  background-color: transparent;\r\n}\r\n.appContainer {\r\n  text-align: center;\r\n  width: 60%;\r\n  height: 100vh;\r\n  margin: auto;\r\n}\r\n</style>","<template>\r\n  <div class=\"oscHost\">\r\n    <div class=\"scrollable\">\r\n      <template v-for=\"(osc) in this.oscList\" :key=\"osc.id\" :item=\"osc\">\r\n        <Osc\r\n          :ref=\"osc.ref\"\r\n          :id=\"osc.id\"\r\n          @disposed=\"removeOsc\"\r\n          @claim=\"handleClaim\"\r\n        />\r\n      </template>\r\n      <div class=\"oscVoid\" @click=\"addOsc\">+</div>\r\n      <div v-if=\"this.oscList.length <= 1\" class=\"oscVoid\" @click=\"addOsc\">+</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Osc from \"./Osc.vue\";\r\nimport Vue from \"vue\";\r\nimport { isProxy, toRaw } from \"vue\";\r\n\r\nexport default {\r\n  components: {\r\n    Osc,\r\n  },\r\n\r\n  data() {\r\n    // data structure oscillators list\r\n    return {\r\n      oscList: [],\r\n      name: \"oscHost\",\r\n      i: 0,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.addOsc();\r\n    this.addOsc();\r\n  },\r\n\r\n  methods: {\r\n    initConnections() {\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n        \r\n      }\r\n    },\r\n\r\n    handleClaim(info) {\r\n      //TO DELETE?\r\n\r\n      //Handling claiming of a drop by oscillator\r\n      //adding actual module to path\r\n\r\n      info.path.unshift(this.name);\r\n      //console.log(info.path)\r\n\r\n      this.$emit(\"claim\", info);\r\n    },\r\n\r\n    addOsc() {\r\n      //TO-DO REWRITE\r\n      let ref = \"osc\" + this.i;\r\n      this.oscList.push({ id: this.i, ref: ref });\r\n      console.log(\"adding osc\" + this.i)\r\n      console.log(this.oscList);\r\n      // this.oscList\r\n      this.i += 1;\r\n    },\r\n\r\n    removeOsc(id) {\r\n      //TO-DO REWRITE\r\n      console.log(\"removing oscillator\" + id);\r\n      // Remove the oscillator from the list\r\n      let index = 0\r\n      this.oscList.forEach(osc => {\r\n        if(osc.id===id) index = this.oscList.indexOf(osc)\r\n      });\r\n      this.oscList.splice(index, 1);\r\n    },\r\n  },\r\n  unmounted() {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.oscHost {\r\n  background-color: #ffadad;\r\n}\r\n\r\n.scrollable {\r\n  font-size: 2vw;\r\n  justify-content: center;\r\n  overflow-y: scroll;\r\n  /* Add a vertical scrollbar */\r\n  overflow-x: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.oscVoid {\r\n  margin: 2.5%;\r\n  border: 0.1vw solid black;\r\n  height: 31.25%;\r\n  width: 94%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n\r\n/*  hide the scrollbar because cannot be resized in Chrome, Safari (breaks % layout)*/\r\n.scrollable::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n  <!-- PLEASE DON'T GO CRAZY TRYING UNDERSTAND THIS DIVs LAYER STACKS XD, Look into OSC MIDDLE-->\r\n  <!-- IN \"osc_middle\" there are the movable circle slider crowns : : 'mod_slider' / 'volume_slider' -->\r\n  <div class=\"main_container\" @click.shift=\"dispose\">\r\n    <div class=\"type_button\" @click=\"nextOscType\" :style=\"this.type_button\">\r\n        <div class=\"innertext\" :style=\"this.type_text\">{{\r\n            osc_types[true] === \"\" ? 'std' : osc_types[this.oscTypeIndex]\r\n          }}\r\n        </div>\r\n      </div>\r\n    <!-- DO NOT TOUCH EVER AGAIN HTML STRUCTURE / CSS !!!!!!!!!!!!-->\r\n    <div class=\"osc_container\" :style=\"osc_container\">     \r\n      <div class=\"osc\">\r\n        <div class=\"osc_back\">\r\n          <div class=\"mod_area\" :style=\"this.mod_area\"></div>\r\n          <div class=\"volume_area\" :style=\"this.volume_area\"></div>\r\n          <div class=\"pitch_slider\" :style=\"this.pitch_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_middle\">\r\n          <div class=\"mod_slider\" ref=\"modulation\" :style=\"this.mod_slider\"></div>\r\n          <div class=\"volume_slider\" ref=\"volume\" :style=\"this.volume_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_front\">\r\n          <div class=\"front_area\" ></div>\r\n          <div class=\"pitch_hand\" ref=\"pitch\" :style=\"this.pitch_hand\"></div>\r\n        </div>\r\n        <div class=\"draggable left\" @mouseup=\"handleDrop('mod')\" @mousedown=\"modulationDown\"></div>\r\n        <div class=\"draggable right\" @mouseup=\"handleDrop('vol')\" @mousedown=\"volumeDown\"></div>\r\n        <div class=\"draggable low\" @mouseup=\"handleDrop('pitch')\" @mousedown=\"pitchDown\"></div>\r\n        <div class=\"osc_wave\"  @click=\"nextWaveform\" :style=\"this.osc_wave\">\r\n          <img v-if=\"this.oscWaveIndex===0\" src=\"@/icons/sine.svg\" alt=\"\">\r\n          <img v-if=\"this.oscWaveIndex===1\" src=\"@/icons/triangle.svg\" alt=\"\">\r\n          <img v-if=\"this.oscWaveIndex===2\" src=\"@/icons/saw.svg\" alt=\"\">\r\n          <img v-if=\"this.oscWaveIndex===3\" src=\"@/icons/square.svg\" alt=\"\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"chain_buttons\" :style=\"chain_buttons\">\r\n      <div></div>\r\n      <div class=\"button_1\" :style=\"button_1\" @click=\"this.onChainclick(0)\"></div>\r\n      <div class=\"button_2\" :style=\"button_2\" @click=\"this.onChainclick(1)\"></div>\r\n      <div class=\"button_3\" :style=\"button_3\" @click=\"this.onChainclick(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport SineIcon from \"vue-material-design-icons/SineWave\";\r\nimport SquareIcon from \"vue-material-design-icons/SquareWave\";\r\nimport TriangleIcon from \"vue-material-design-icons/TriangleWave\";\r\nimport SawtoothIcon from \"vue-material-design-icons/SawtoothWave\";\r\nimport { gainToDb } from \"tone\";\r\nimport MyPolySynth from \"./MyPolySynth.js\";\r\n\r\nconst wave_types = [\"sine\", \"triangle\", \"sawtooth\", \"square\"];\r\nconst osc_types = [\"\", \"fm\", \"am\", \"fat\"];\r\n\r\nconst colors = {\r\n  red: { light: 'lightcoral', medium: 'red', dark: 'darkred', glow: 'pink' },\r\n  yellow: { light: 'yellow', medium: 'orange', dark: 'gold', glow: '' },\r\n  green: { light: 'lightgreen', medium: 'olive', dark: 'darkgreen', glow: 'aqua' },\r\n  gray: { light:'lightgray', medium:'darkgray', dark:'black', glow:''},\r\n  blue: { light:'lightblue', medium:'deepskyblue', dark:'darkblue', glow:'cyan' }\r\n}\r\nexport default {\r\n  components: {\r\n    SineIcon,\r\n    SquareIcon,\r\n    TriangleIcon,\r\n    SawtoothIcon,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      //DEBUG, TO REMOVE\r\n      PLACEHOLDERCOLOR: \"red\",\r\n      //-----------------\r\n      colors: {\r\n        red: [\"lightcoral\", \"red\", \"darkred\"],\r\n        yellow: [\"string4\", \"string5\", \"string6\"],\r\n        green: [\"lightgreen\", \"green\", \"string9\"],\r\n      },\r\n      // waveform_btn_style: osc_background_colors[0], todo: colors?\r\n      osc_types: [\"std\", \"fm\", \"am\", \"fat\"],\r\n      volume: 0.5,\r\n      modulation: 1,\r\n      pitch: 0,\r\n      pan: 0,\r\n      attack: 0.01,\r\n      decay: 0.1,\r\n      sustain: 1,\r\n      release: 0.2,\r\n      maxPitch: 24,\r\n      minPitch: -24,\r\n      partials: \"\",\r\n      oscWaveIndex: 0, // wave currently selected from  ['sine','triangle', ...]\r\n      oscTypeIndex: 0, // type of osc selected from ['std', 'fm', ...];\r\n      waveform_btn_style: \"lightblue\",\r\n      wave_icon_size: 32,\r\n      is_modulationDown: false,\r\n      is_volumeDown: false,\r\n      is_pitchDown: false,\r\n      chain_routes: [true, false, false],\r\n      modulators: [],\r\n      tempModulator: null,\r\n    };\r\n  },\r\n  props: [\"id\"],\r\n\r\n  mounted() {\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n    window.addEventListener(\"resize\", this.resizeGraphics);\r\n\r\n    // resize graphics\r\n    this.resizeGraphics();\r\n    this.gainNode = new Tone.Gain();\r\n    this.synth = new MyPolySynth(\"\", this.gainNode, this.polyphonyVoices);\r\n\r\n    this.synths.list.push(this.synth)\r\n    console.log(this.synths.list)\r\n    // we need to init connection to first filter chain\r\n    // in the first osc case we need to make sure we connect after the chain is created , so we handle that with events\r\n    // emitted from the filter chain - in all other cases we can just normally connect to the chain\r\n    if(this.id > 1 ) {\r\n      this.initConnections()\r\n    }\r\n\r\n  },\r\n\r\n  computed: {\r\n    osc_container() {\r\n      return {\r\n        background: colors.red['light']\r\n      }\r\n    },\r\n    /*------------ TYPE BUTTON ------------*/\r\n    type_button() {\r\n      return {\r\n        fontSize: '.5vw',\r\n        background: colors.gray['light'],\r\n      }\r\n    },\r\n    type_text() {\r\n      return {\r\n        color: colors.gray.dark\r\n      }\r\n    },\r\n    /*--------------- OSC -----------------*/\r\n    volume_area(){\r\n      return{\r\n        background: colors.red['dark']\r\n      }\r\n    },\r\n    mod_area(){\r\n      return{\r\n        background: colors.yellow['light']\r\n      }\r\n    },\r\n    mod_slider() {\r\n      return {\r\n        transform: \"rotate(-\" + this.modulation * 111 + \"deg)\",\r\n      }\r\n    },\r\n    volume_slider() {\r\n      return {\r\n        backgroundColor: this.colors.red[1],\r\n        transform: \"rotate(\" + this.volume * 112 + \"deg)\",\r\n      }\r\n    },\r\n    pitch_slider(){\r\n      return {\r\n        background: colors.green['light']\r\n      }\r\n    },\r\n    pitch_hand() {\r\n      return {\r\n        transform: \"rotate(\" + (this.pitch * 50) / this.maxPitch + \"deg)\",\r\n        borderLeft: \".1vw solid \" + colors.green['dark']\r\n      }\r\n    },\r\n    osc_wave(){\r\n      return {\r\n        background: colors.yellow['light']\r\n      }\r\n    },\r\n    /*------------ CHAIN BUTTONS ------------*/\r\n    chain_buttons(){\r\n      return{\r\n        background: colors.gray.light\r\n      }\r\n    },\r\n    button_1() {\r\n      let color = ''\r\n      if(this.chain_routes[0])\r\n        color = colors.red.dark\r\n      else \r\n        color = colors.red.light\r\n      return{\r\n        background: color\r\n      }\r\n    },\r\n    button_2() {\r\n      let color = ''\r\n      if(this.chain_routes[1])\r\n        color = colors.green.dark\r\n      else \r\n        color = colors.green.light\r\n      return{\r\n        background: color\r\n      }\r\n    },\r\n    button_3() {\r\n      let color = ''\r\n      if(this.chain_routes[2])\r\n        color = colors.blue.dark\r\n      else \r\n        color = colors.blue.light\r\n      return{\r\n        background: color\r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    dispose(){\r\n      this.$emit(\"disposed\", this.id)\r\n      this.synth.disconnectDispose()\r\n      this.synths.list.splice(this.synths.list.indexOf(this.synth),1)\r\n      console.log(\"Synth to remove is at index: \"+this.synths.list.indexOf(this.synth))\r\n      console.log(\"list of synths remaining:\")\r\n      console.log(this.synths.list)\r\n    },\r\n    initConnections(){\r\n      this.gainNode.connect(this.filterChains[0][0])\r\n    },\r\n    \r\n    // ----------- GRAPHIC HELPERS -----------\r\n    resizeGraphics() {\r\n      let width = document.body.clientWidth;\r\n      if (width >= 500) {\r\n        this.wave_icon_size = (32 * width) / 1500;\r\n      } else {\r\n        this.wave_icon_size = 0;\r\n      }\r\n    },\r\n\r\n    // ---------- USER EVENTS ---------------\r\n    // Audio routing changed clicking the dots that represent the filter chains\r\n    onChainclick(id) {\r\n      console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.chain_routes[id]) {\r\n          console.log(\r\n            \"disconnect from: \" +\r\n            this.filterChains[id][0] + \" \" + id\r\n          );\r\n          this.gainNode.disconnect(\r\n            this.filterChains[id][0]\r\n          );\r\n        } else {\r\n          console.log(\r\n            \"connect to: \" +\r\n            this.filterChains[id][0] + \" \" + id\r\n          );\r\n          this.gainNode.connect(\r\n            this.filterChains[id][0]\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n          \"error: \" + e + \"\\nCHAIN CONNECTION TO OSC UNSUCCESSFUL. Can't connect to \" + this.filterChains[id][0]\r\n        );\r\n      }\r\n      this.chain_routes[id] = !this.chain_routes[id];\r\n    },\r\n    onMouseMove(event) {\r\n      if (this.is_volumeDown) {\r\n        // RIGHT FADER - volume\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.volume = Math.max(this.volume + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving down\r\n          this.volume = Math.min(this.volume + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // this.synth.volume.value = gainToDb(1 - this.volume);\r\n        this.synth.setParameters({ volume: gainToDb(1 -this.volume) });\r\n        console.log(\"synth volume: \" + this.volume.toFixed(2) + \" dB\");\r\n\r\n      } else if (this.is_modulationDown) {\r\n        // LEFT FADER - modulation\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving down\r\n          this.modulation = Math.max(this.modulation + event.movementY / 100,0);\r\n        } else {\r\n          // Mouse is moving up\r\n          this.modulation = Math.min(this.modulation + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // (1- this.modulation) needed because the graphics return a value of 1 for the minimum and 0 for the max\r\n        this.synth.setParameters({ modulation: 1-this.modulation })\r\n        console.log(\"modulation: \" + (1 -  this.modulation.toFixed(2)));\r\n\r\n      } else if (this.is_pitchDown) {\r\n        // BOTTOM FADER - pitch shift\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.pitch = Math.min(this.pitch - Math.floor(event.movementX), this.maxPitch);\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.pitch = Math.max(this.pitch - Math.floor(event.movementX), this.minPitch);\r\n        }\r\n        // ----------- modify here synth audio -------------\r\n        // todo: pitch max a dx e min a sx - meglio il contrario, secondo me - segue possibile ma brutto fix\r\n        // console.log(\"pitch shift: \" + this.pitch * -1)\r\n        // this.synth.set({detune: this.pitch * -100});\r\n        console.log(\"pitch shift: \" + this.pitch);\r\n        this.synth.setParameters({transpose: this.pitch});\r\n      }\r\n    },\r\n    onMouseUp(event) {\r\n      if (this.is_modulationDown) this.is_modulationDown = false;\r\n      if (this.is_volumeDown) this.is_volumeDown = false;\r\n      if (this.is_pitchDown) this.is_pitchDown = false;\r\n    },\r\n\r\n    modulationDown(event) {\r\n      if (!this.is_modulationDown) this.is_modulationDown = true;\r\n    },\r\n    volumeDown(event) {\r\n      if (!this.is_volumeDown) this.is_volumeDown = true;\r\n    },\r\n    pitchDown(event) {\r\n      if (!this.is_pitchDown) this.is_pitchDown = true;\r\n    },\r\n    handleDrop(target) {\r\n      //TO DO\r\n\r\n      let path = [target];\r\n      path.unshift(\"osc\"+this.id)\r\n      //console.log(path)\r\n      this.$emit(\"claim\", {\r\n        type: \"claim\",\r\n        path: path,\r\n        color: this.PLACEHOLDERCOLOR,\r\n      });\r\n    },\r\n\r\n    // ----------- AUDIO -----------\r\n    // Update osc waveform\r\n    nextOscType() {\r\n      // go circularly on along the list osc_types list\r\n      this.oscTypeIndex++;\r\n      if (this.oscTypeIndex >= osc_types.length) this.oscTypeIndex = 0;\r\n\r\n      this.synth.setParameters({type: osc_types[this.oscTypeIndex]})\r\n\r\n      console.log(\"osc type: \" + osc_types[this.oscTypeIndex]);\r\n    },\r\n\r\n    nextWaveform() {\r\n      // update selected wavetype changing the current index\r\n      this.oscWaveIndex++;\r\n      if (this.oscWaveIndex >= wave_types.length) this.oscWaveIndex = 0;\r\n\r\n      console.log(wave_types[this.oscWaveIndex])\r\n      // set new waveform\r\n      this.synth.setParameters({waveform: wave_types[this.oscWaveIndex]})\r\n    },\r\n\r\n    // set routing\r\n    connect(route) {\r\n      this.synth.connect(route);\r\n    },\r\n  },\r\n\r\n  unmounted() {\r\n    // remove event listeners\r\n    window.removeEventListener(\"resize\", this.resizeGraphics);\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped >\r\n.main_container{\r\n  height: 33.3%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.osc_container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  flex: 4;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n/*---------- MOD TYPE BUTTON ----------*/\r\n.type_button {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n\r\n.type_button .innertext {\r\n  font-size: .8vw;\r\n  writing-mode: vertical-rl;\r\n  text-orientation: upright;\r\n  text-transform: uppercase;\r\n}\r\n\r\n/*--------------- OSC -----------------*/\r\n.osc {\r\n  width: 90%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n}\r\n\r\n.osc_back {\r\n  margin: auto;\r\n  width: 100%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 1;\r\n}\r\n\r\n.pitch_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%, 100% 100%, 100% 72%, 50% 50%, 0% 72%, 0% 100%);\r\n  z-index: 27;\r\n}\r\n\r\n.mod_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 2;\r\n}\r\n\r\n.volume_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 3;\r\n}\r\n\r\n.osc_middle {\r\n  margin: auto;\r\n  height: 95%;\r\n  top: 2.5%;\r\n  left: 2.5%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 25;\r\n}\r\n\r\n.mod_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: gold;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 27;\r\n}\r\n\r\n.volume_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 26;\r\n}\r\n\r\n.osc_front {\r\n  margin: auto;\r\n  height: 96%;\r\n  top: 2%;\r\n  left: 2%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 50;\r\n}\r\n\r\n.front_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: white;\r\n  clip-path: polygon(50% 100%,\r\n      100% 100%,\r\n      100% 72%,\r\n      50% 50%,\r\n      0% 72%,\r\n      0% 100%,\r\n      50% 100%);\r\n  z-index: 10;\r\n}\r\n\r\n.pitch_hand {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 40%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.osc_wave {\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1;\r\n  width: 45%;\r\n  border-radius: 50%;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 101;\r\n}\r\n\r\n.osc_wave img{\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n  width: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  clip-path: circle(20%);\r\n  z-index: 102;\r\n}\r\n\r\n.draggable {\r\n  position: absolute;\r\n  z-index: 75;\r\n}\r\n\r\n.left {\r\n  width: 50%;\r\n  height: 70%;\r\n  left: 0;\r\n  bottom: 30%;\r\n  background-color: transparent;\r\n}\r\n\r\n.right {\r\n  width: 50%;\r\n  height: 70%;\r\n  background-color: transparent;\r\n  left: 50%;\r\n  bottom:30%\r\n}\r\n\r\n.low {\r\n  width: 100%;\r\n  height: 30%;\r\n  top: 70%;\r\n  background-color: transparent;\r\n}\r\n\r\n/*------------ CHAIN BUTTONS ------------*/\r\n.chain_buttons {\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n.button_1,.button_2,.button_3 { \r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n}\r\n</style>","import {Synth, Envelope, Gain, Meter, Frequency, LFO} from 'tone'\r\nimport {nextTick} from 'vue';\r\nimport * as Tone from 'tone'\r\n\r\nconst max_partials_num = 50;\r\nconst vol_damp_factor = 2;\r\n\r\nexport default class MyPolySynth {\r\n    constructor(synthType = \"\", destination = null, nVoices = 16) {\r\n        this.destination = destination;\r\n\r\n        //data of all modulators that could potentially be linked to the parameters of the synth\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                vol: {\r\n                    amount: 1,\r\n                    parameters: {\r\n                        attack: 1,\r\n                        decay: 0.3,\r\n                        sustain: 0.8,\r\n                        release: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n                pan: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                }\r\n            },\r\n            lfo: {\r\n                vol: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                pan: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        //preset with which all voices of polyphony will be created\r\n        this.synthPreset = {\r\n            type: synthType,\r\n            waveform: \"sine\",\r\n            vol: -12,\r\n            transpose: 0,\r\n            mod: 0,\r\n            partials: \"\",\r\n            pan: \"\"\r\n        }\r\n\r\n        this.dampNode = new Gain(vol_damp_factor);\r\n        //all polyphony voices are connected here\r\n        console.log(Tone.dbToGain(this.synthPreset.vol))\r\n        this.gainNode = new Gain(Tone.dbToGain(this.synthPreset.vol));\r\n\r\n        //list of polyphony voices\r\n        this.allVoices = [] //always holds reference to all voices\r\n        this.freeVoices = []    //holds reference to free voices\r\n        this.busyVoices = {}    //holds reference to busy voices, key=note, value=voice\r\n        this.nVoices = nVoices  //used to initialize, taken from globalProperties\r\n        this.lastNotes = Array(this.nVoices)  //stores last nVoices played\r\n\r\n        //INIT VOICES\r\n        this.initVoices()\r\n        // console.log(this.freeVoices)\r\n\r\n        // connect gainNode to destination\r\n        try {\r\n            this.gainNode.connect(this.dampNode)\r\n            this.dampNode.connect(this.destination)\r\n        } catch (error) {\r\n            console.log(\"mypolysynth gain node trying to connect to undefined or null node - error: \" + error)\r\n        }\r\n    }\r\n\r\n    initVoices() {\r\n        //for each voice\r\n        for (let index = 0; index < this.nVoices; index++) {\r\n\r\n            //initializing empty modulators matrix\r\n            let modulators = {\r\n                envelope: {\r\n                    vol: {amount: 1, signal: null},\r\n                    mod: {amount: 0, signal: null},\r\n                    pitch: {amount: 0, signal: null},\r\n                    pan: {amount: 0, signal: null},\r\n                },\r\n                lfo: {\r\n                    vol: {amount: 0, signal: null},\r\n                    mod: {amount: 0, signal: null},\r\n                    pitch: {amount: 0, signal: null},\r\n                    pan: {amount: 0, signal: null},\r\n                }\r\n            }\r\n\r\n            //creating gain and synth\r\n            let gain = new Gain(1).connect(this.gainNode)\r\n            //synth is created and initialized with preset parameters\r\n            let synth = this.createSynth()\r\n            synth.oscillator.disconnect()\r\n            synth.oscillator.connect(gain)\r\n\r\n            //disconnect and dispose synth inner envelope\r\n            synth.envelope.disconnect()\r\n            synth.envelope.dispose()\r\n\r\n            let voice = {synth: synth, gain: gain, modulators: modulators}\r\n\r\n            //creating and connecting every modulator with amount>0\r\n            for (let type in modulators) {\r\n                for (let target in modulators[type]) {\r\n                    if (modulators[type][target].amount > 0) {\r\n                        let tempMod = this.createModulator(type)\r\n                        modulators[type][target].signal = tempMod\r\n                        //console.log(\"CREATING \"+type+target)\r\n                        //console.log(tempMod)\r\n                        this.connectModulator(tempMod, type, target, voice)\r\n                    }\r\n\r\n                }\r\n            }\r\n            //pushing voice into freeVoices array\r\n            this.freeVoices.push(voice)\r\n            this.allVoices.push(voice)\r\n        }\r\n\r\n        this.initialized = false\r\n        //setting all parameters of modulators\r\n        this.updateModulators();\r\n        this.initialized = true\r\n    }\r\n\r\n    playNote(note, velocity) {\r\n        if (this.initialized) {\r\n            this.lastNotes.push(note);\r\n            if (this.lastNotes.length > this.nVoices) {\r\n                this.lastNote = this.lastNotes.shift();\r\n            }\r\n            // console.log(\"LAST NOTES:\")\r\n            // console.log(this.lastNotes)\r\n            // console.log(this.lastNote)\r\n            /* console.log(\"FREE VOICES:\")\r\n            this.freeVoices.forEach(element => {\r\n                console.log(element)\r\n            });\r\n            console.log(\"BUSY VOICES:\")\r\n            for (let key in this.busyVoices) {\r\n                console.log(key)\r\n            }\r\n             */\r\n\r\n            //removin\r\n            // g first free voice from array\r\n            let voice = this.freeVoices.shift()\r\n            if (!voice) {\r\n                console.log(\"NEW NOTE OVERWRITE: \" + this.lastNote)\r\n                voice = this.busyVoices[this.lastNote]\r\n                delete this.busyVoices[this.lastNote]\r\n            }\r\n            this.busyVoices[note] = voice\r\n\r\n            //trigger attack in each modulator\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].signal) {\r\n                        switch (type) {\r\n                            case \"envelope\":\r\n                                //console.log(\"TRIGGERING ATTACK IN \"+type+\" connected to \"+target)\r\n                                voice.modulators[type][target].signal.cancel(Tone.now())\r\n                                voice.modulators[type][target].signal.triggerAttack(Tone.now())\r\n                                break;\r\n                            case \"lfo\":\r\n                                voice.modulators[type][target].signal.stop(Tone.now())\r\n                                voice.modulators[type][target].signal.start(Tone.now())\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            voice.synth.oscillator.stop(Tone.now())\r\n            voice.synth.envelope.cancel(Tone.now())\r\n            //trigger attack in synth\r\n            voice.synth.triggerAttack(note, Tone.now(), velocity / 128)\r\n        }\r\n    }\r\n\r\n    stopNote(note) {\r\n        if (this.initialized) {\r\n            if (this.busyVoices[note]) {\r\n                let voice = this.busyVoices[note]\r\n                delete this.busyVoices[note]\r\n                this.freeVoices.push(voice)\r\n\r\n                //triggerRelease on all envelopes\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        if (voice.modulators[type][target].signal) {\r\n                            switch (type) {\r\n                                case \"envelope\":\r\n                                    //console.log(\"Triggering release of \"+type+\" with target \"+target)\r\n                                    voice.modulators[type][target].signal.triggerRelease(Tone.now())\r\n                                    break;\r\n                                case \"lfo\":\r\n                                    voice.modulators[type][target].signal.stop(Tone.now())\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                setTimeout(() => {\r\n                    voice.synth.triggerRelease(Tone.now())\r\n                }, this.modulatorsData.envelope.vol.parameters.release * 1000)\r\n            }\r\n        }\r\n    }\r\n\r\n    createSynth() {\r\n        let synth = new Synth()\r\n        //Setting parameters\r\n        nextTick(() => {\r\n            synth.set({\r\n                \"volume\": this.synthPreset.vol,\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n        })\r\n        console.log(this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials)\r\n\r\n        return synth\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n    updateModulators() {\r\n        this.allVoices.forEach(voice => {\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        voice.modulators[type][target].amount = this.modulatorsData[type][target].amount\r\n                        if (voice.modulators[type][target].amount > 0) {\r\n                            //IF IT SHOULD BE ACTIVE\r\n                            if (!voice.modulators[type][target].signal) {\r\n                                //IF IT'S STILL NOT CREATED\r\n                                voice.modulators[type][target].signal = createModulator(type)\r\n                                connectModulator(voice.modulators[type][target].signal, type, target, voice)\r\n                            }\r\n                            //SET MODULATOR PARAMETERS\r\n                            this.modulatorSetter(voice.modulators[type][target].signal, type, this.modulatorsData[type][target].parameters)\r\n                        } else {\r\n                            //IF IT SHOULDN'T BE ACTIVE\r\n                            if (voice.modulators[type][target].signal) {\r\n                                //IF IT EXISTS\r\n                                voice.modulators[type][target].signal.disconnect()\r\n                                voice.modulators[type][target].signal.dispose()\r\n                            }\r\n                        }\r\n                        // console.log(\"UPDATING \"+type+\" FOR \"+target)\r\n                        // console.log(voice.modulators[type][target].signal)\r\n                        // TO WRITE MAPPING FUNCTION\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    updateSynths() {\r\n        this.allVoices.forEach(voice => {\r\n            voice.synth.set({\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n        });\r\n        this.gainNode.set({gain: Tone.dbToGain(this.synthPreset.vol)})\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                modulator.set({// todo:\r\n\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n\r\n//have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, target, voice) {\r\n        // console.log(\"connecting\")\r\n        // console.log(modulator)\r\n        // console.log(\"to voice: \")\r\n        // console.log(voice)\r\n        // console.log(\"to target: \"+target)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        modulator.connect(voice.gain.gain)\r\n                        break;\r\n                    case \"mod\":\r\n                        //TO-DO\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                }\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    // setters\r\n    setModulatorParameters(type, target, parameters) {\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].amount = amount\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    //TO RENAME IN SET SYNTH PARAMETERS\r\n    setParameters({\r\n                      volume = this.synthPreset.vol,\r\n                      modulation = this.synthPreset.mod,\r\n                      transpose = this.synthPreset.transpose,\r\n                      pan = this.synthPreset.pan,\r\n                      type = this.synthPreset.type,\r\n                      waveform = this.synthPreset.waveform\r\n                  }) {\r\n        if (this.initialized) {\r\n            this.synthPreset.vol = volume;\r\n            this.synthPreset.mod = modulation;\r\n            this.synthPreset.transpose = transpose;\r\n            this.synthPreset.pan = pan;\r\n            this.synthPreset.type = type;\r\n            this.synthPreset.waveform = waveform;\r\n            console.log(this.synthPreset.waveform)\r\n\r\n            switch (this.synthPreset.type) {\r\n                default:\r\n                    if (this.synthPreset.modulation === 0) {\r\n                        this.synthPreset.partials = \"\";\r\n                    } else {\r\n                        waveform === 'sine'\r\n                            ? this.synthPreset.partials = (+this.synthPreset.mod * max_partials_num).toFixed(0).toString()\r\n                            : this.synthPreset.partials = max_partials_num - (+this.synthPreset.mod * max_partials_num).toFixed(0).toString()\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            console.log(\"myPolySynth setParameters: \\nvol: \" + this.synthPreset.vol.toFixed(2) + \"\\nmod: \" + this.synthPreset.mod.toFixed(2) + \"\\npartials: \" + this.synthPreset.partials + \"\\ntranspose: \" + this.synthPreset.transpose + \"\\npan: \" + this.synthPreset.pan + \"\\ntype: \" + this.synthPreset.type + \"\\nwaveform: \" + this.synthPreset.waveform);\r\n            this.updateSynths()\r\n        } else {\r\n            console.log(\"Polysynth not initialized\")\r\n        }\r\n    }\r\n\r\n// connect each voice to the new routing\r\n    connect(route) {\r\n        this.gainNode.connect(route)\r\n    }\r\n\r\n    disconnectDispose() {\r\n        //for each voice\r\n        this.allVoices.forEach(voice => {\r\n            //Disconnect and dispose synth\r\n            voice.synth.disconnect()\r\n            voice.synth.dispose()\r\n            //Disconnect and dispose gain\r\n            voice.gain.disconnect()\r\n            voice.gain.dispose()\r\n            //Disconnect and dispose modulators\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    voice.modulators[type][target].signal.disconnect()\r\n                    voice.modulators[type][target].signal.dispose()\r\n                }\r\n            }\r\n        });\r\n        //disconnect and dispose main gainNode\r\n        this.gainNode.disconnect()\r\n        this.gainNode.dispose()\r\n\r\n        console.log(\"MyPolySynth completely disconnected and disposed\")\r\n    }\r\n}","import { render } from \"./Osc.vue?vue&type=template&id=7e56effc&scoped=true\"\nimport script from \"./Osc.vue?vue&type=script&lang=js\"\nexport * from \"./Osc.vue?vue&type=script&lang=js\"\n\nimport \"./Osc.vue?vue&type=style&index=0&id=7e56effc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e56effc\"]])\n\nexport default __exports__","import { render } from \"./OscHost.vue?vue&type=template&id=408dd6fb&scoped=true\"\nimport script from \"./OscHost.vue?vue&type=script&lang=js\"\nexport * from \"./OscHost.vue?vue&type=script&lang=js\"\n\nimport \"./OscHost.vue?vue&type=style&index=0&id=408dd6fb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-408dd6fb\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"filterHost\">\r\n    <template v-for=\"(chain) in this.chainList\" :key=\"chain.id\" :item=\"chain\">\r\n        <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"initConnections()\"/>\r\n       <!-- todo: remove <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"handleFilterInitialized\" /> -->\r\n      </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FilterChain from './FilterChain.vue'\r\nimport * as Tone from \"tone\";\r\nimport { isProxy, toRaw } from \"vue\";\r\nconst colors= [\"red\", \"green\", \"blue\"]\r\n\r\nexport default {\r\n  name: \"FilterHost\",\r\n  components: {\r\n    FilterChain,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      chainList: [],\r\n      nFilterChains: 3,\r\n    }\r\n  },\r\n  mounted() {\r\n    for (let index = 0; index < this.nFilterChains; index++) {\r\n      this.chainList.push({ id: index, ref:\"chain\"+index, color: colors[index]})\r\n    }\r\n    // console.log(this.filterChains)\r\n  },\r\n\r\n  methods: {\r\n    initConnections(){\r\n      // console.log(\"filter host init connections\")\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n      }\r\n      this.$emit('filterInitialized')\r\n      console.log(\"Filters initialised\")\r\n      console.log(\"filters:\")\r\n      console.log(this.filterChains)\r\n      console.log(\"fx:\")\r\n      console.log(this.fxChains)\r\n    }\r\n  }\r\n}\r\n\r\n// access a parameter of a vue component child from its father\r\n</script>\r\n\r\n<style scoped>\r\n.filterHost {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #ffd6a5;\r\n}\r\n</style>","<template>\r\n  <div class=\"filterChain\">\r\n    <div class=\"chainHead\" ref=\"chainHead\">\r\n    </div>\r\n    <template v-for=\"(filter) in this.filterList\" :key=\"filter.id\" :item=\"filter\">\r\n      <Filter :ref=\"filter.ref\" :chainId=\"this.id\" :id=\"filter.id\" :filter_type=\"filter.type\" :chainColor=\"this.color\"\r\n              @filtersMounted=\"this.handleFiltersMounted()\"/>\r\n      <!-- <Filter :ref=\"filter.ref\" :chainId=\"this.id\" :id=\"filter.id\" :filter_type=\"filter.type\" :chainColor=\"this.color\"\r\n              @filtersMounted=\"this.handleFiltersMounted()\"/> -->\r\n    </template>\r\n    <div class=\"chainTail\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// I want to modify a variable of a vue component from its father that is a vue component too\r\nimport Filter from './Filter.vue'\r\nimport {getDestination} from \"tone\";\r\nimport {isProxy, toRaw} from \"vue\";\r\n\r\nconst filterTypes = [\"highpass\", \"peaking\", \"lowpass\"]\r\n\r\nexport default {\r\n  ref: \"FilterChain\",\r\n  components: {\r\n    Filter,\r\n  },\r\n  props: [\"color\", \"id\"],\r\n  data() {\r\n    return {\r\n      filterList: [],\r\n      nFilters: 3\r\n    }\r\n  },\r\n  mounted() {\r\n    //console.log(\"mounting filter chain\" + this.id)\r\n    for (let index = 0; index < this.nFiltersXchain; index++) {\r\n      this.filterList.push({id: index, ref: \"filter\" + index, type: filterTypes[index]})\r\n    }\r\n\r\n    let head = this.$refs.chainHead;\r\n    head.style.background = this.$props.color;\r\n    head.style.clipPath = \"polygon(50% 40%, 80% 50%, 50% 60%, 50% 40%)\"\r\n  },\r\n\r\n  methods: {\r\n    handleFiltersMounted() {\r\n      if (this.id === this.nFilterChains - 1) {\r\n        this.$emit(\"filterInitialized\")\r\n      }\r\n    },\r\n    // -------- AUDIO -------x\r\n    initConnections() {\r\n      console.log(\"filter chain init connections\")\r\n\r\n      for (let index = 0; index < this.nFiltersXchain - 1; index++) {\r\n        this.filterChains[this.id][index].connect(this.filterChains[this.id][index + 1]);\r\n        // console.log(\"connected \" + this.filterChains[this.id][index] + \" to \" + this.filterChains[this.id][index + 1])\r\n      }\r\n\r\n      // connect chain of filters output to chain each chain of effects\r\n      for (let i = 0; i < this.nFxChains; i++) {\r\n        this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[i][0]);\r\n      }\r\n\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.filterChain {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.chainHead {\r\n  flex: 1;\r\n  border: 1px black solid;\r\n  background-color: transparent;\r\n}\r\n\r\n.chainTail {\r\n  flex: 1;\r\n  border: 1px black solid;\r\n  background-color: transparent;\r\n}\r\n\r\n.filter {\r\n  flex: 4;\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"filter\">\r\n    <div class=\"filter_back\" ref=\"filter_back\">\r\n      <div class=\"filter_logo\" @mousedown=\"logoDown\">\r\n        <div v-if=\"is_logoDown && type != 'peaking'\" class=\"logo_text\">\r\n          {{ ((1 - this.resonance) * 100).toFixed() + \"%\" }}\r\n        </div>\r\n        <div v-if=\"is_logoDown && type == 'peaking'\" class=\"logo_text\">\r\n          {{ ((1 - 2 * this.resonance) * 100).toFixed() + \"%\" }}\r\n        </div>\r\n        <!--<div v-if=\"type==='peaking'\" class=\"logo_BD_mask\" :style=\"computedBDMaks\"></div> -->\r\n        <div class=\"logo_glow\" :style=\"computedGlow\"></div>\r\n\r\n        <div class=\"logo_border\"></div>\r\n        <div class=\"logo\">\r\n          <div v-if=\"is_logoDown\" class=\"logo_text_back\"></div>\r\n          <div\r\n            v-if=\"type === 'lowpass'\"\r\n            class=\"logo_LP\"\r\n            :style=\"computedLP\"\r\n          ></div>\r\n          <div\r\n            v-if=\"type === 'highpass'\"\r\n            class=\"logo_HP\"\r\n            :style=\"computedHP\"\r\n          ></div>\r\n          <div v-if=\"type === 'peaking'\" class=\"logo_BD_back\"></div>\r\n          <div\r\n            v-if=\"type === 'peaking'\"\r\n            class=\"logo_BD_circle\"\r\n            :style=\"computedBDCircle\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\r\n\r\n  data() {\r\n    return {\r\n      type: this.filter_type,\r\n      cutoff: 0.5,\r\n      resonance: 0.5,\r\n      is_logoDown: false,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    // mouse event listeners\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n\r\n    //console.log(this.$props)\r\n\r\n    // -------------- AUDIO ---------------\r\n    this.filter = new Tone.Filter();\r\n    this.initFilterParams();\r\n\r\n    //console.log(this.chainId+\" \"+this.id)\r\n    //Inserting filter in global variable\r\n    this.filterChains[this.chainId][this.id] = this.filter;\r\n\r\n    if (\r\n      this.id === this.nFiltersXchain - 1 &&\r\n      this.chainId === this.nFilterChains - 1\r\n    )\r\n      this.$emit(\"filtersMounted\");\r\n  },\r\n\r\n  methods: {\r\n    // ----------- USER EVENTS -----------\r\n    onMouseMove(event) {\r\n      if (this.is_logoDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\r\n          console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving down\r\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\r\n        }\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.cutoff = Math.max(\r\n            this.cutoff + Math.floor(event.movementX) / 100,\r\n            0\r\n          );\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.cutoff = Math.min(\r\n            this.cutoff + Math.floor(event.movementX) / 100,\r\n            1\r\n          );\r\n        }\r\n        // ----------- audio ---------\r\n        this.setResonance();\r\n        this.setCutoff();\r\n      }\r\n    },\r\n\r\n    onMouseUp() {\r\n      if (this.is_logoDown) this.is_logoDown = false;\r\n      document.body.style.cursor = \"pointer\";\r\n    },\r\n    logoDown() {\r\n      if (!this.is_logoDown) {\r\n        this.is_logoDown = true;\r\n        document.body.style.cursor = \"none\";\r\n      }\r\n    },\r\n\r\n    // ----------- AUDIO HELPERS--------------\r\n    // takes value in [0, 1] range and it maps it to [50, 16000] interval in a logarithmic fashion\r\n    cutoffLogMapping(x) {\r\n      if (x < 0 || x > 1) {\r\n        console.error(\"Input value must be between 0 and 1.\");\r\n        return;\r\n      }\r\n      return 20 * Math.pow(10, Math.log10(22000 / 20) * x);\r\n    },\r\n\r\n    // takes value in [0, 1] range and it maps it to [0, 10] linearly\r\n    resonanceRangeNormalizer(x, type) {\r\n      if (x < 0 || x > 1) {\r\n        console.error(\"Input value must be between 0 and 1.\");\r\n        return;\r\n      }\r\n      switch (type) {\r\n        case \"lowpass\":\r\n          return 15 * x;\r\n        case \"highpass\":\r\n          return 15 * x;\r\n        case \"peaking\":\r\n          return 30 * (x - 0.5);\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    initFilterParams() {\r\n      let self = this;\r\n\r\n      // init switched off filters\r\n      switch (this.filter_type) {\r\n        case \"lowpass\":\r\n          this.cutoff = 1;\r\n          this.resonance = 1;\r\n          break;\r\n        case \"highpass\":\r\n          this.cutoff = 0;\r\n          this.resonance = 1;\r\n          break;\r\n        case \"peaking\":\r\n          this.cutoff = 0.5;\r\n          this.resonance = 0.5;\r\n          break;\r\n        case \"bandpass\":\r\n          break;\r\n        case \"lowshelf\":\r\n          break;\r\n        case \"highshelf\":\r\n          break;\r\n        case \"notch\":\r\n          break;\r\n        case \"allpass\":\r\n          break;\r\n        default:\r\n          console.log(\"Invalid filter type\");\r\n      }\r\n\r\n      this.filter.set({\r\n        frequency: self.cutoffLogMapping(this.cutoff),\r\n        type: this.filter_type,\r\n      });\r\n    },\r\n\r\n    setCutoff() {\r\n      let self = this;\r\n      this.filter.set({\r\n        frequency: self.cutoffLogMapping(this.cutoff),\r\n      });\r\n      console.log(\r\n        this.type +\r\n          \" cutoff: \" +\r\n          this.cutoff.toFixed(2) +\r\n          \" - \" +\r\n          this.cutoffLogMapping(this.cutoff).toFixed(0) +\r\n          \" Hz\"\r\n      );\r\n    },\r\n\r\n    setResonance() {\r\n      let self = this;\r\n\r\n      if (\r\n        this.type === \"lowshelf\" ||\r\n        this.type === \"highshelf\" ||\r\n        this.type === \"peaking\"\r\n      ) {\r\n        // bell delta amplitude is controlled changing the 'gain' parameter\r\n        this.filter.set({\r\n          gain: self.resonanceRangeNormalizer(1 - self.resonance, this.type),\r\n        });\r\n        console.log(\r\n          \"Setting Peaking Resonance: \" +\r\n            self.resonanceRangeNormalizer(1 - self.resonance, this.type)\r\n        );\r\n      } else if (this.type === \"lowpass\" || this.type === \"highpass\") {\r\n        // filter's Q is controlled changing the 'Q' parameter \r\n        this.filter.set({\r\n          Q: self.resonanceRangeNormalizer(1 - self.resonance, this.type),\r\n        });\r\n        console.log(\r\n          \"Setting LowPass/HighPass Resonance: \" +\r\n            self.resonanceRangeNormalizer(1 - self.resonance, this.type)\r\n        );\r\n      }\r\n\r\n      /*\r\n      console.log(\r\n        \"resonance: \" +\r\n          this.resonance.toFixed(2) +\r\n          \" - \" +\r\n          Math.round(this.resonanceRangeNormalizer((self.resonance), this.type)) +\r\n          \" dB\"\r\n      );\r\n      */\r\n    },\r\n\r\n    connect(destination) {\r\n      this.filter.connect(destination);\r\n    },\r\n\r\n    // ------------ GETTERS SETTERS -------------\r\n    getFilter() {\r\n      return this.filter;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    computedHeadStyle() {\r\n      return {\r\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\",\r\n      };\r\n    },\r\n    computedGlow() {\r\n      if (this.filter_type == \"peaking\" && this.resonance < 0.5) {\r\n        return {\r\n          opacity: 1 - 2 * this.resonance,\r\n          background: \"#e58138\",\r\n        };\r\n      } else if (this.filter_type == \"peaking\" && this.resonance >= 0.5) {\r\n        return {\r\n          opacity: 2 * this.resonance - 1,\r\n          background: \"#e58138\",\r\n        };\r\n      } else {\r\n        return {\r\n          opacity: 1 - this.resonance,\r\n        };\r\n      }\r\n    },\r\n    computedLP() {\r\n      return {\r\n        transform: \"translateX(\" + (-100 + this.cutoff * 100) + \"%)\",\r\n      };\r\n    },\r\n    computedHP() {\r\n      return {\r\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n      };\r\n    },\r\n    computedBDMaks() {\r\n      let clip = \"\";\r\n      if (this.resonance > 0.5)\r\n        clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      else if (this.resonance < 0.5)\r\n        clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";\r\n      else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      return {\r\n        clipPath: clip,\r\n      };\r\n    },\r\n    computedBD() {\r\n      if (1 - this.resonance >= 0.5) {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance) * 100 + \"%\",\r\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n        };\r\n      } else {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\r\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\",\r\n        };\r\n      }\r\n    },\r\n    computedBDCircle() {\r\n      return {\r\n        transform:\r\n          \"translate(\" +\r\n          (this.cutoff - 0.5) * 100 +\r\n          \"%, \" +\r\n          (this.resonance - 0.5) * 100 +\r\n          \"%)\",\r\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.filter {\r\n  position: relative;\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.filter_back {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 90%;\r\n  height: 90%;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.filter_logo {\r\n  position: absolute;\r\n  display: flex;\r\n  flex: 5;\r\n  background-color: #ffebd2;\r\n  height: 80%;\r\n  top: 0;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 0;\r\n  clip-path: circle(50%);\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.logo_border {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 5;\r\n  border-radius: 50%;\r\n  border: 0.1vw solid #3b210e;\r\n}\r\n\r\n.logo {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 3;\r\n  clip-path: circle(50%);\r\n  background-color: #e58138;\r\n}\r\n\r\n.logo_glow {\r\n  position: absolute;\r\n  height: 90%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: #e58138;\r\n  z-index: 1;\r\n  filter: blur(0.5vw);\r\n}\r\n\r\n.logo_text {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1vw;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  color: #ffebd2;\r\n  opacity: 100%;\r\n  background-color: #ffebd2;\r\n  z-index: 5;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.logo_text_back {\r\n  position: absolute;\r\n  z-index: 6;\r\n  left: 15%;\r\n  top: 30%;\r\n  width: 70%;\r\n  height: 40%;\r\n  background-color: #e58138;\r\n  opacity: 100%;\r\n  border-radius: 10%;\r\n}\r\n\r\n.logo_LP {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: #ffebd2;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_HP {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: #ffebd2;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_BD_mask {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: #ffebd2;\r\n  z-index: 2;\r\n}\r\n\r\n.logo_BD {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: #ffebd2;\r\n  z-index: 1;\r\n}\r\n.logo_BD_line {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 4%;\r\n  top: 48%;\r\n  filter: blur(0.02vw);\r\n  border-radius: 30%;\r\n  background-color: #e58138;\r\n  z-index: 5;\r\n}\r\n.logo_BD_circle {\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n\r\n  border-radius: 50%;\r\n  background-color: #ffebd2;\r\n  z-index: 5;\r\n}\r\n</style>","import { render } from \"./Filter.vue?vue&type=template&id=7ce0469a&scoped=true\"\nimport script from \"./Filter.vue?vue&type=script&lang=js\"\nexport * from \"./Filter.vue?vue&type=script&lang=js\"\n\nimport \"./Filter.vue?vue&type=style&index=0&id=7ce0469a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7ce0469a\"]])\n\nexport default __exports__","import { render } from \"./FilterChain.vue?vue&type=template&id=e167cf44&scoped=true\"\nimport script from \"./FilterChain.vue?vue&type=script&lang=js\"\nexport * from \"./FilterChain.vue?vue&type=script&lang=js\"\n\nimport \"./FilterChain.vue?vue&type=style&index=0&id=e167cf44&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e167cf44\"]])\n\nexport default __exports__","import { render } from \"./FilterHost.vue?vue&type=template&id=a1cc4ade&scoped=true\"\nimport script from \"./FilterHost.vue?vue&type=script&lang=js\"\nexport * from \"./FilterHost.vue?vue&type=script&lang=js\"\n\nimport \"./FilterHost.vue?vue&type=style&index=0&id=a1cc4ade&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a1cc4ade\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"fxHost\">\r\n    <div class=\"fxGrid\">\r\n      <FxCell v-for=\"(fx) in Fx_chain1\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\" ></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain2\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain3\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain4\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\" @fxMounted=\"this.initFxConnections()\"></FxCell>\r\n    </div>\r\n    <div class=\"gainList\">\r\n      <div id=\"gain1\" class=\"channelGain\"></div>\r\n      <div id=\"gain2\" class=\"channelGain\"></div>\r\n      <div id=\"gain3\" class=\"channelGain\"></div>\r\n      <div id=\"gain4\" class=\"channelGain\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FxCell from '../Effects/FxCell.vue'\r\nimport {Gain, getDestination} from \"tone\";\r\nexport default {\r\n  name: \"FxHost\",\r\n  components: {FxCell},\r\n\r\n  data(){\r\n    return{\r\n      Fx_chain1: [],\r\n      Fx_chain2: [],\r\n      Fx_chain3: [],\r\n      Fx_chain4: []\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    // note: refs are kept incremental through the chains, while everything else is indexed relatively to the chain\r\n    console.log(\"creating fx\")\r\n    for (let i = 1; i <= this.nFxXchain; i++) {\r\n      this.Fx_chain1.push({id: i, ref: 'Fx' + i, chainId: 0});\r\n      this.Fx_chain2.push({id: i, ref: 'Fx' + i + this.nFxXchain, chainId: 1});\r\n      this.Fx_chain3.push({id: i, ref: 'Fx' + i + this.nFxXchain * 2, chainId: 2});\r\n      this.Fx_chain4.push({id: i, ref: 'Fx' + i + this.nFxXchain * 3, chainId: 3});\r\n      // console.log(i)\r\n    }\r\n\r\n    this.fxChains[0][0] = new Gain(1);\r\n    for (let i = 1; i < this.nFxChains; i++) {\r\n      this.fxChains[i][0] = new Gain(0);\r\n    }\r\n  },\r\n\r\n  methods:{\r\n    // -------------------- AUDIO -----------------------\r\n    initFxConnections(){\r\n      for (let i = 0; i < this.nFxChains; i++) {\r\n        for (let j = 0; j < this.nFxXchain; j++) {\r\n          this.fxChains[i][j].connect(this.fxChains[i][j+1].getToneReference())\r\n          // console.log(\"chain \", i ,\" id: \", j, \" into chain \", i , \" id: \", j+1)\r\n        }\r\n        this.fxChains[i][this.nFxXchain].connect(getDestination()) // todo: connect to Master Gain node?\r\n        // console.log(\"chain \", i, \" id: \", this.nFxXchain-1, \" into getDestination()\")\r\n      }\r\n    },\r\n\r\n    // first node of each chain is a gain node - we set its volume to adjust whole chain gain\r\n    setChainVolume(chainId, volume){\r\n      this.fxChains[chainId][0].gain.rampTo(volume, 0.1)\r\n\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .fxHost{\r\n    background-color:#fdffb6;\r\n    display: flex;\r\n    opacity: 90%;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .fxGrid{\r\n    height: 97%;\r\n    width: 100%;\r\n    flex: 1;\r\n    display: grid;\r\n    grid-column: auto;\r\n    grid-template-rows:  1fr 1fr 1fr 1fr 1fr ;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr;\r\n    grid-auto-flow: column;\r\n    grid-gap: 2%;\r\n    margin: 3%;\r\n  }\r\n\r\n  .gainList{\r\n    height: 16%;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin:10px;\r\n    align-items: center;\r\n    flex-direction: row;\r\n    background-color: lightgoldenrodyellow;\r\n    border: .1vw solid black;\r\n  }\r\n\r\n  .channelGain {\r\n    height: 80%;\r\n    aspect-ratio: 1;\r\n    border-radius: 50%;\r\n    background-color: #3b210e;\r\n  }\r\n\r\n</style>\r\n\r\n\r\n\r\n\r\n","<template>\r\n  <div class=\"cell\">\r\n    <div class=\"icon\" @click=\"nextFx\" @click.shift=\"setToBypass\" @mousedown=\"fxDown\">\r\n      <div v-if=\"this.typeId===0\"> +</div>\r\n      <img v-if=\"this.typeId===1\" src=\"@/icons/blizzard.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId===2\" src=\"@/icons/drop.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId===3\" src=\"@/icons/fire.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId===4\" src=\"@/icons/moon.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId===5\" src=\"@/icons/wind.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId===6\" src=\"@/icons/tornado.svg\" alt=\"\">\r\n    </div>\r\n\r\n    <div class=\"glow\" :style=\"computedGlowStyle\" @mousedown=\"fxDown\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isSVGTag } from '@vue/shared';\r\nimport MyEffect from \"@/views/Synth/Effects/MyFx\";\r\nimport { getDestination } from \"tone\";\r\n\r\nconst types = ['none', 'reverb', 'delay', 'distortion', 'vibrato', 'pan', 'chorus'];\r\nconst colors = ['transparent', 'lightblue', 'deepskyblue', 'red', 'orange', 'darkorchid', 'yellow'];\r\nexport default {\r\n  props: [\"chainId\", \"id\"],\r\n\r\n  data() {\r\n    return {\r\n      modulation: 0,\r\n      is_down: false,\r\n      typeId: 0,\r\n      volume: 0,\r\n    };\r\n  },\r\n  mounted() {\r\n    // gesture listeners\r\n    document.addEventListener(\"mouseup\", this.onMouseup);\r\n    document.addEventListener(\"mousemove\", this.onMousemove);\r\n    // init effect as bypass (a gain node)\r\n    this.effect = new MyEffect({ typeId: types[this.typeId], modulation: this.modulation})\r\n    // this.effect = this.fxHelper.generateToneFx('none');\r\n   // create the effect in the global fx matrix\r\n    this.fxChains[this.chainId][this.id] = this.effect;\r\n    // console.log(\"fx chain: \" + this.chainId + \" - fx id: \" + this.id)\r\n    // console.log(this.chainId, \" \", this.id)\r\n\r\n    // notify parent that each filter has been created\r\n    if(this.chainId === this.nFxChains-1 && this.id === this.nFxXchain){\r\n      this.$emit(\"fxMounted\")\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    computedGlowStyle() {\r\n      return {\r\n        opacity: (this.modulation + 0.3) * 100 + \"%\",\r\n        background: colors[this.typeId]\r\n      };\r\n    }\r\n  },\r\n\r\n  components: {isSVGTag},\r\n\r\n  methods: {\r\n    // ------------------ USER INTERACTIONS -----------------------\r\n    nextFx() {\r\n      // change fx type and index\r\n      this.typeId = this.generateNextTypeIndex();\r\n      let fxType = types[this.typeId]\r\n      console.log(fxType)\r\n\r\n      this.changeFxType(fxType)\r\n\r\n    },\r\n\r\n    changeFxType(fxType){\r\n      // disconnect old effect\r\n      this.effect.disconnect();\r\n      this.effect.dispose();\r\n\r\n      // create new effect\r\n      this.effect = new MyEffect({ type: fxType, modulation: this.modulation })\r\n\r\n      // attach new fx in the global fx matrix\r\n      this.fxChains[this.chainId][this.id] = this.effect;\r\n      this.fxChains[this.chainId][this.id-1].connect(this.fxChains[this.chainId][this.id].getToneReference());\r\n      if(this.fxChains[this.chainId][this.id+1]) {\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1].getToneReference())\r\n      } else {\r\n        this.fxChains[this.chainId][this.id].connect(getDestination())\r\n      }\r\n\r\n      /* // debug global fx matrix\r\n      this.fxChains.forEach((chain) => {\r\n        chain.forEach((fx) => {\r\n          if (fx instanceof MyEffect){\r\n            console.log(fx.getToneReference())\r\n          } else { console.log(fx) }\r\n        })\r\n      })*/\r\n    },\r\n\r\n    generateRandomTypeIndex(){\r\n      return Math.round(Math.random() * 10 + 1) % types.length\r\n    },\r\n\r\n    generateNextTypeIndex(){\r\n      return (this.typeId + 1) % types.length;\r\n    },\r\n\r\n    setToBypass() {\r\n      this.typeId = 0;\r\n      this.changeFxType('none')\r\n\r\n      console.log(\"set fx in position \" + this.chainId + \" - \" + this.id + \" to bypass\")\r\n    },\r\n\r\n    fxDown() {\r\n      if (!this.is_down)\r\n        this.is_down = true;\r\n    },\r\n    onMouseup() {\r\n      if (this.is_down)\r\n        this.is_down = false;\r\n    },\r\n    onMousemove(event) {\r\n      if (this.is_down) {\r\n        if (event.movementY < 0) {\r\n          this.modulation = Math.min(this.modulation - event.movementY / 100, 1);\r\n        } else {\r\n          this.modulation = Math.max(this.modulation - event.movementY / 100, 0);\r\n        }\r\n        this.effect.modulateFxParams({fx: this.effect, typeId: this.typeId, mod: this.modulation})\r\n\r\n        console.log(this.modulation);\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cell {\r\n  position: relative;\r\n  background-color: transparent;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.icon {\r\n  display: flex;\r\n  aspect-ratio: 1/1;\r\n  position: absolute;\r\n  z-index: 2;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon div {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 2vw;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon img {\r\n  width: 2vw;\r\n  aspect-ratio: 1/1;\r\n  opacity: 100%;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.glow {\r\n  border-radius: 5%;\r\n  flex: 1;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  z-index: 1;\r\n  background-color: red;\r\n}\r\n\r\n.glow div {\r\n  height: 100%;\r\n  width: 100%;\r\n  opacity: 100%;\r\n  color: black;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 2vw;\r\n}\r\n</style>","import {Gain, Reverb, Distortion, Vibrato, Panner, Chorus, PingPongDelay, Chebyshev, Envelope, LFO} from 'tone'\r\n\r\nexport default class MyEffect {\r\n    constructor({ type = \"none\", modulation = 0 }) {\r\n        this.type = type;\r\n        this.effect = this.generateToneFx(type)\r\n        this.mod = modulation;\r\n        this.modulatorsPreset = {\r\n            envelope: {\r\n                vol: { amount: 1, signal: null },\r\n                mod: { amount: 0, signal: null },\r\n                pitch: { amount: 0, signal: null },\r\n                pan: { amount: 0, signal: null },\r\n            },\r\n            lfo: {\r\n                vol: { amount: 0, signal: null },\r\n                mod: { amount: 0, signal: null },\r\n                pitch: { amount: 0, signal: null },\r\n                pan: { amount: 0, signal: null },\r\n            }\r\n        }\r\n    }\r\n\r\n    // getters\r\n    getToneReference(){\r\n        return this.effect;\r\n    }\r\n\r\n    // creator\r\n    generateToneFx(type) {\r\n        let effect;\r\n        switch (type) {\r\n            case 'none':\r\n                effect = new Gain();\r\n                break;\r\n            case 'reverb':\r\n                effect = this.createReverb()\r\n                break;\r\n            case 'delay':\r\n                effect = this.createDelay()\r\n                break;\r\n            case 'distortion':\r\n                effect = this.createDistortion()\r\n                break;\r\n            case 'vibrato':\r\n                effect = this.createVibrato()\r\n                break;\r\n            case 'pan':\r\n                effect = this.createPan()\r\n                break;\r\n            case 'chorus':\r\n                effect = this.createChorus()\r\n                break;\r\n            default:\r\n                effect = new Gain();\r\n        }\r\n        return effect;\r\n    }\r\n\r\n    // setters\r\n    // general setter\r\n    modulateFxParams({ fx = this.effect, type = this.effect, mod = this.mod }) {\r\n        switch (type) {\r\n            case 1: // reverb\r\n                fx.set({\r\n                    decay: 0.1 + 5*mod,\r\n                    wet: 0.1 + 0.9*mod,\r\n                })\r\n                break;\r\n\r\n            case 2: // delay\r\n                fx.set({\r\n                    delayTime: 0.4*mod,\r\n                    feedback: 0.95*mod,\r\n                    wet: 0.1 + 0.9*mod,\r\n                })\r\n                break;\r\n\r\n            case 3: //  distortion\r\n                fx.set({\r\n                    distortion: 0.05 + 0.95*mod,\r\n                    wet: 0.05 + 0.95*mod,\r\n                })\r\n                break;\r\n\r\n            case 4: // vibrato\r\n                fx.set({\r\n                    depth: 0.5 + 0.5*mod,\r\n                    frequency: 1 + 20*mod,\r\n                    wet: 0.05 + 0.95*mod\r\n                })\r\n                break;\r\n\r\n            case 5: // pan\r\n                let coeff = -1 + (2*mod)\r\n                fx.set({\r\n                    pan: coeff,\r\n                    wet: 1,\r\n                })\r\n                console.log(coeff)\r\n\r\n                break;\r\n\r\n            case 6: // chorus\r\n                fx.set({\r\n                    depth: 0.5 + mod*0.5,\r\n                    freq: 2 + mod*8,\r\n                    feedback: 0.05 + mod*0.9,\r\n                    type: \"triangle\" + (mod*10).toString()\r\n                })\r\n                break;\r\n            default:\r\n                fx = new Gain();\r\n        }\r\n    }\r\n\r\n    // -------------- FX CREATION -------------\r\n    createReverb(){\r\n        let reverb = new Reverb();\r\n        reverb.set({\r\n            decay: 5,\r\n            wet: 0.9\r\n        })\r\n        return reverb;\r\n    }\r\n    createDelay() {\r\n        //todo: not interesting effect if used like this\r\n        let delay = new PingPongDelay();\r\n        delay.set({\r\n            delayTime: 0.15,\r\n            feedback: 0.55,\r\n            wet: 0.75,\r\n        })\r\n        return delay;\r\n    }\r\n    createDistortion(){\r\n\r\n        let distortion = new Distortion();\r\n        distortion.set({\r\n            distortion: 0.8,\r\n            wet: 0.5,\r\n        })\r\n\r\n        return distortion;\r\n    }\r\n    createVibrato(){\r\n        let vibrato = new Vibrato();\r\n        vibrato.set({\r\n            depth: 0.85,\r\n            frequency: 3,\r\n            wet: 0.95\r\n        })\r\n        return vibrato;\r\n    }\r\n    createPan(){\r\n        //const osc = new Oscillator(1, \"sine\").toDestination().start();\r\n        // todo:\r\n        let pan = new Panner();\r\n        pan.set({\r\n            pan: 0,\r\n            wet: 1\r\n        })\r\n        return pan;\r\n    }\r\n    createChorus(){\r\n        let chorus = new Chorus();\r\n        chorus.set({\r\n            depth: 1,\r\n            frequency: 5,\r\n            spread: 88,\r\n            wet: 1,\r\n            feedback: 0.6,\r\n            delayTime: 220,\r\n            type: \"triangle6\"\r\n        })\r\n        return chorus;\r\n    }\r\n\r\n    // TODO:  ------------- MODULATION ------------\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope;\r\n            case \"lfo\":\r\n                return new LFO;\r\n            default:\r\n                console.log(\"Error creating modulator\");\r\n                return null;\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                modulator.set({\r\n\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n    setModulatorParameters(type, target, parameters) {\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    // have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, gain, target) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n\r\n                break;\r\n\r\n            case \"lfo\":\r\n                //TO-DO\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid modulator type\")\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // ------------- TONE JS EXTENSIONS -----------\r\n    connect(route){\r\n        this.effect.connect(route);\r\n    }\r\n    disconnect(){\r\n        this.effect.disconnect();\r\n    }\r\n    dispose(){\r\n        this.effect.dispose();\r\n    }\r\n}\r\n","import { render } from \"./FxCell.vue?vue&type=template&id=43cc3f96&scoped=true\"\nimport script from \"./FxCell.vue?vue&type=script&lang=js\"\nexport * from \"./FxCell.vue?vue&type=script&lang=js\"\n\nimport \"./FxCell.vue?vue&type=style&index=0&id=43cc3f96&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-43cc3f96\"]])\n\nexport default __exports__","import { render } from \"./FxHost.vue?vue&type=template&id=6903f0e0&scoped=true\"\nimport script from \"./FxHost.vue?vue&type=script&lang=js\"\nexport * from \"./FxHost.vue?vue&type=script&lang=js\"\n\nimport \"./FxHost.vue?vue&type=style&index=0&id=6903f0e0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6903f0e0\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"toolsHost\">\r\n        <SpecAnalyzer />\r\n        <Oscilloscope ref=\"oscilloscope\"/>\r\n        <Meter />\r\n    </div>\r\n</template>\r\n./Tools/Meter.vue../Meter.vue\r\n<script>\r\n    import * as Tone from \"tone\";\r\n    import Meter from './Meter.vue'\r\n    import Oscilloscope from './Oscilloscope.vue'\r\n    import SpecAnalyzer from './SpecAnalyzer.vue'\r\n    export default {\r\n    name: \"ToolsHost\",\r\n    components: {\r\n        Meter,\r\n        Oscilloscope,\r\n        SpecAnalyzer\r\n    },\r\n    data() {\r\n        return {\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    beforeDestroy() {\r\n    },\r\n\r\n    methods: {\r\n        setOscilloscopeTiming(note){\r\n            let mseconds = (1/Tone.Frequency(note))*1000;\r\n            this.$refs[\"oscilloscope\"].setTiming(mseconds)\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .toolsHost{\r\n        background-color: #caffbf;\r\n        display: grid;\r\n        grid-template-rows: 40% 40% 20%;\r\n    }\r\n</style>","<template>\r\n  <div class=\"meter\">\r\n    <div class=\"signalSum\">\r\n      <div ref=\"left\" class=\"signal\" :style=\"computedWidthLeft\"></div>\r\n      <div></div>\r\n      <div ref=\"right\" class=\"signal\" :style=\"computedWidthRight\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Meter } from \"tone\";\r\nimport { dbToGain, gainToDb } from \"tone\";\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      widthLeft: 0,\r\n      widthRight: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    computedWidthLeft() {\r\n      return { width: `${this.widthLeft}%` };\r\n    },\r\n    computedWidthRight() {\r\n      return { width: `${this.widthRight}%` };\r\n    },\r\n  },\r\n  mounted() {\r\n    this.meter = new Meter({channels: 2});\r\n    Tone.getDestination().connect(this.meter);\r\n\r\n    this.intervalId = setInterval(() => {\r\n      this.updateWidths();\r\n    }, 25);\r\n  },\r\n  methods: {\r\n    updateWidths() {\r\n      //this.volume = this.meter.getValue();\r\n      [ this.leftVolume , this.rightVolume ] = this.meter.getValue();\r\n      if (!isFinite(this.leftVolume) && !isFinite(this.rightVolume)) return;\r\n      //console.log(this.meter.getValue()); \r\n      this.widthLeft = Math.min(dbToGain(this.leftVolume) * 100,100);\r\n      this.widthRight = Math.min(dbToGain(this.rightVolume) * 100,100);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.meter.stop();\r\n    this.meter.dispose();\r\n    clearInterval(this.intervalId);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.meter {\r\n  grid-row: 3;\r\n  background-color: #caffbf;\r\n  border-radius: 0.2vw;\r\n  margin: 0.3vw;\r\n  display: flex;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.signal {\r\n  background-color: #658060;\r\n  height: 100%;\r\n  border-radius: 0.05vw;\r\n}\r\n.signalSum {\r\n  margin: 0.3vw;\r\n  display: grid;\r\n  grid-template-rows: 45% 10% 45%;\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./Meter.vue?vue&type=template&id=735a25ba&scoped=true\"\nimport script from \"./Meter.vue?vue&type=script&lang=js\"\nexport * from \"./Meter.vue?vue&type=script&lang=js\"\n\nimport \"./Meter.vue?vue&type=style&index=0&id=735a25ba&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-735a25ba\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"oscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      oscilloscopeData: [],\r\n      timing: 10,\r\n    };\r\n  },\r\n  mounted() {\r\n    \r\n\r\n    this.oscilloscope = new Tone.Waveform();\r\n    Tone.getDestination().connect(this.oscilloscope);\r\n\r\n    this.startOscilloscope();\r\n\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = this.canvas.offsetWidth;\r\n    this.canvas.height = this.canvas.offsetHeight;\r\n\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n  methods: {\r\n    setTiming(timing) {\r\n      this.timing = timing;\r\n      clearInterval(this.intervalId);\r\n      this.startOscilloscope();\r\n    },\r\n    startOscilloscope() {\r\n        //console.log(\"avviando oscilloscope con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.updateOscilloscopeData();\r\n      }, this.timing);\r\n    },\r\n    draw(data) {\r\n      // clear the canvas\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"#658060\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 2;\r\n      this.ctx.beginPath();\r\n\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 0; i < data.length; i++) {\r\n        // calculate the x and y position of the point\r\n        let x = i * (this.canvas.width / data.length);\r\n        let y = (this.canvas.height / 2) * (1 - data[i]);\r\n\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y);\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n    updateOscilloscopeData() {\r\n      this.oscilloscopeData = this.oscilloscope.getValue();\r\n      this.draw(this.oscilloscopeData);\r\n      //console.log(this.oscilloscopeData);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.oscilloscope.dispose();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.oscilloscope {\r\n  grid-row: 2;\r\n  margin: 0.3vw 0.3vw 0vw;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.oscilloscopeCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #caffbf;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./Oscilloscope.vue?vue&type=template&id=7c95fe40\"\nimport script from \"./Oscilloscope.vue?vue&type=script&lang=js\"\nexport * from \"./Oscilloscope.vue?vue&type=script&lang=js\"\n\nimport \"./Oscilloscope.vue?vue&type=style&index=0&id=7c95fe40&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"spectral-analyzer\">\r\n    <canvas class=\"analyzerCanvas\" ref=\"canvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { dbToGain, gainToDb } from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.analyser = new Tone.Analyser(\"fft\", 2048);\r\n    this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\r\n    Tone.getDestination().connect(this.analyser);\r\n    this.startAnalyzer()\r\n  },\r\n  methods: {\r\n    draw() {\r\n      //requestAnimationFrame(this.draw);\r\n\r\n      this.data = this.analyser.getValue();\r\n      this.canvasCtx.strokeStyle = \"#658060\";\r\n      //console.log(this.data)\r\n\r\n      // clear the canvas\r\n      this.canvasCtx.clearRect(\r\n        0,\r\n        0,\r\n        this.$refs.canvas.width,\r\n        this.$refs.canvas.height\r\n      );\r\n        let x\r\n\r\n        \r\n\r\n      // render the analysis on the canvas\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        \r\n        this.value = 6*dbToGain(this.data[i])*this.$refs.canvas.height;\r\n        //console.log(this.value)\r\n        x = (Math.log10(i) / Math.log10(2048)) * this.$refs.canvas.width\r\n        this.canvasCtx.fillStyle = \"black\";\r\n        this.canvasCtx.fillRect(x, this.$refs.canvas.height - this.value, 1, this.value);\r\n      }\r\n    },\r\n    startAnalyzer() {\r\n      console.log(this.$refs.canvas.height)\r\n        console.log(\"avviando analyzer con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.draw();\r\n      }, 10);\r\n    },\r\n  },\r\n  beforeDestroy() {},\r\n};\r\n</script>\r\n\r\n<style>\r\n.spectral-analyzer{\r\n  grid-row: 1;\r\n  margin: 0.3vw 0.3vw 0vw;\r\n  box-sizing: border-box;\r\n}\r\n.analyzerCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #caffbf;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./SpecAnalyzer.vue?vue&type=template&id=29fb33de\"\nimport script from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\nexport * from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\n\nimport \"./SpecAnalyzer.vue?vue&type=style&index=0&id=29fb33de&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolsHost.vue?vue&type=template&id=683376de\"\nimport script from \"./ToolsHost.vue?vue&type=script&lang=js\"\nexport * from \"./ToolsHost.vue?vue&type=script&lang=js\"\n\nimport \"./ToolsHost.vue?vue&type=style&index=0&id=683376de&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"modHost\">\r\n    <template\r\n      v-for=\"modulator in modulatorList\"\r\n      :key=\"modulator.id\"\r\n      :ref=\"modulator.ref\"\r\n    >\r\n      <Envelope\r\n        @dragging=\"handleDragging\"\r\n        :id=\"modulator.id\"\r\n        ref=\"Modulators\"\r\n      />\r\n    </template>\r\n    <ModSelector\r\n      :nModulators=\"this.nModulators\"\r\n      @selection=\"changeSelection\"\r\n      @dragging=\"handleDragging\"\r\n      ref=\"EnvSelector\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport Envelope from \"./Envelope.vue\";\r\nimport ModSelector from \"./ModSelector.vue\";\r\nimport { isProxy, toRaw } from 'vue';\r\n\r\nexport default {\r\n  components: {\r\n    Envelope,\r\n    ModSelector,\r\n  },\r\n  data() {\r\n    return {\r\n      name: \"modHost\",\r\n      //number of total modulators\r\n      nModulators: 6,\r\n      //visible modulator\r\n      selection: 0,\r\n      //list of modulators\r\n      modulatorList: [],\r\n    };\r\n  },\r\n  created() {\r\n    //create array of modulators\r\n    for (let i = 0; i < this.nModulators; i++) this.modulatorList.push({ id: i, ref: i });\r\n    //console.log(toRaw(this.modulatorList));\r\n  },\r\n  mounted() {\r\n    //unhide selected modulator\r\n    toRaw(toRaw(this.$refs.Modulators)[this.selection]).unHide();\r\n  },\r\n  methods: {\r\n    handleMouseUp(e){\r\n      toRaw(toRaw(this.$refs.Modulators)[this.selection]).handleMouseUp(e);\r\n    },\r\n    handleMouseMove(e){\r\n      toRaw(toRaw(this.$refs.Modulators)[this.selection]).handleMouseMove(e);\r\n    },\r\n    /*\r\n    noteDown(note) {\r\n      this.modulatorList.forEach((modulator) => {\r\n        //console.log(this.$refs.Modulators);\r\n        toRaw(toRaw(this.$refs.Modulators)[this.selection]).noteDown(note);\r\n      });\r\n    },\r\n    noteUp(note) {\r\n      this.modulatorList.forEach((modulator) => {\r\n        toRaw(toRaw(this.$refs.Modulators)[this.selection]).noteUp(note);\r\n      });\r\n    },\r\n    */\r\n    changeSelection(id) {\r\n      console.log(\"selected \"+id)\r\n      console.log(toRaw(toRaw(this.$refs.Modulators)[this.selection]))\r\n      \r\n      toRaw(toRaw(this.$refs.Modulators)[this.selection]).hide();\r\n      \r\n      this.selection = id;\r\n      console.log(\"selected \" + this.selection);\r\n      toRaw(toRaw(this.$refs.Modulators)[this.selection]).unHide();\r\n      \r\n    },\r\n    handleDragging(draggedId) {\r\n      //handles @dragging on ModSelector\r\n\r\n      //------DATA ROUTING------\r\n      //creating path with id of dragged modulator\r\n      let path = [draggedId]\r\n      //inserting actual module in path (at top)\r\n      path.unshift(this.name);\r\n      //---------------\r\n\r\n      let modType = toRaw(toRaw(this.$refs.Modulators)[draggedId]).type\r\n\r\n      let modParam = toRaw(toRaw(toRaw(this.$refs.Modulators)[draggedId]).parameters);\r\n      this.$emit(\"dragging\",{ type:\"dragging\", path: path, modType: modType, params: modParam } );\r\n      //console.log(path, modParam)\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modHost {\r\n  grid-column: span 2; /* takes 2 spaces horizontally*/\r\n  background-color: #9bf6ff;\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: 80% 20%;\r\n}\r\n\r\n.env_background {\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.env_canvas {\r\n  height: 0;\r\n  width: 0;\r\n  left: 1%;\r\n  background-color: #cdfbff;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #141f20;\r\n  box-sizing: border-box;\r\n}\r\n</style>","<template>\r\n  <div ref=\"container\" class=\"container hidden\">\r\n    <div class=\"envelope_container\">\r\n      <div class=\"envelope\" :style=\"this.adsr\">\r\n        <div\r\n          class=\"attack_area\"\r\n          :style=\"attack_area\"\r\n          @mousedown=\"attack_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"attack_dot\"\r\n          :style=\"attack_dot\"\r\n          @mousedown=\"attack_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"decay_area\"\r\n          :style=\"decay_area\"\r\n          @mousedown=\"decay_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"decay_dot\"\r\n          :style=\"decay_dot\"\r\n          @mousedown=\"decay_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"sustain_area\"\r\n          :style=\"sustain_area\"\r\n          @mousedown=\"sustain_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"sustain_line\"\r\n          :style=\"sustain_line\"\r\n          @mousedown=\"sustain_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"release_area\"\r\n          :style=\"release_area\"\r\n          @mousedown=\"release_down()\"\r\n        ></div>\r\n        <div\r\n          class=\"release_dot\"\r\n          :style=\"release_dot\"\r\n          @mousedown=\"release_down()\"\r\n        ></div>\r\n\r\n        <div class=\"attack\" :style=\"this.attack\">\r\n          <div class=\"attack_color\" :style=\"this.attack_Color\"></div>\r\n        </div>\r\n        <div class=\"decay\" :style=\"this.decay\">\r\n          <div class=\"decay_head\" :style=\"this.decay_head\">\r\n            <div class=\"decay_color\" :style=\"this.decay_Color\"></div>\r\n          </div>\r\n          <div class=\"decay_color\" :style=\"this.decay_Color\"></div>\r\n        </div>\r\n        <div class=\"sustain\" :style=\"this.sustain\">\r\n          <div class=\"sustain_head\" :style=\"this.sustain_head\"></div>\r\n          <div class=\"sustain_color\" :style=\"this.sustain_Color\"></div>\r\n        </div>\r\n        <div class=\"release\" :style=\"this.release\">\r\n          <div class=\"release_color\" :style=\"this.release_Color\"></div>\r\n        </div>\r\n        <!--\r\n        <div class=\"space\" :style=\"this.space\"></div>\r\n        -->\r\n        <div class=\"time_strech\" :style=\"this.time_Stretch\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"knobs\">\r\n      <div v-for=\"knob in knobList\" :key=\"knob.id\" :ref=\"knob.ref\" class=\"knob\">\r\n        {{ knob.id }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { transcode } from \"buffer\";\r\nimport * as Tone from \"tone\";\r\nimport ToolsHost from \"../Tools/ToolsHost.vue\";\r\nconst duration = 2.5;\r\nconst colors = {\r\n  red: { light: \"lightcoral\", medium: \"red\", dark: \"darkred\", glow: \"pink\" },\r\n  yellow: { light: \"yellow\", medium: \"orange\", dark: \"gold\", glow: \"\" },\r\n  green: {\r\n    light: \"lightgreen\",\r\n    medium: \"olive\",\r\n    dark: \"darkgreen\",\r\n    glow: \"aqua\",\r\n  },\r\n  gray: { light: \"lightgray\", medium: \"darkgray\", dark: \"black\", glow: \"\" },\r\n  blue: {\r\n    light: \"lightblue\",\r\n    medium: \"deepskyblue\",\r\n    dark: \"darkblue\",\r\n    glow: \"cyan\",\r\n  },\r\n};\r\nexport default {\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      tempEvent: null,\r\n      type: \"envelope\",\r\n      parameters: {},\r\n      knobList: [],\r\n      is_attack_down: false,\r\n      is_decay_down: false,\r\n      is_sustain_down: false,\r\n      is_release_down: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.parameters = {\r\n      attack: 0.1,\r\n      attackCurve: \"linear\",\r\n      decay: 0.5,\r\n      decayCurve: \"linear\",\r\n      sustain: 0.5,\r\n      releaseCurve: \"linear\",\r\n      release: 1,\r\n      scale: 1,\r\n    };\r\n    for (let i = 0; i < 9; i++) {\r\n      this.knobList.push({ id: i, ref: \"knob\" + i });\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      });\r\n    }, 500);\r\n\r\n    //this.connectEnvelope(\"all osc\");\r\n  },\r\n  methods: {\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    handleMouseMove(e) {\r\n      //console.log(e)\r\n      //NOT NECESSAARY, FOR DEBUGGING\r\n      if (this.isDragging) {\r\n        this.tempEvent = e;\r\n      }\r\n      let p = this.parameters;\r\n      if (this.is_attack_down) { // attack\r\n        if (e.movementX > 0) {\r\n          console.log(\r\n            this.parameters.attack,\r\n            duration * p.scale - (p.attack + p.release + p.sustain)\r\n          );\r\n          p.attack = Math.min(\r\n            p.attack + e.movementX / 100,\r\n            duration * p.scale - (p.decay + p.release + p.sustain)\r\n          );\r\n        }\r\n        if (e.movementX < 0) {\r\n          console.log(p.attack);\r\n          p.attack = Math.max(p.attack + e.movementX / 100, 0);\r\n        }\r\n      }\r\n      if (this.is_decay_down) { // decay\r\n        if (e.movementX > 0) {\r\n          console.log(this.parameters.decay);\r\n          p.decay = Math.min(\r\n            p.decay + e.movementX / 100,\r\n            duration * p.scale - (p.attack + p.release + p.sustain)\r\n          );\r\n        }\r\n        if (e.movementX < 0) {\r\n          console.log(p.decay);\r\n          p.decay = Math.max(p.decay + e.movementX / 100, 0);\r\n        }\r\n      }\r\n      if (this.is_sustain_down) { // sustain\r\n        if (e.movementY > 0) {\r\n          p.sustain = Math.max(p.sustain - e.movementY / 100, 0);\r\n        } else if (e.movementY < 0) {\r\n          p.sustain = Math.min(p.sustain - e.movementY / 100, 1);\r\n        }\r\n        console.log(p.sustain);\r\n      }\r\n      if (this.is_release_down) { // release\r\n        if (e.movementX > 0) {\r\n          p.release = Math.min(\r\n            p.release + e.movementX / 100,\r\n            duration * p.scale - (p.attack + p.decay + p.sustain)\r\n          );\r\n        }\r\n        if (e.movementX < 0) {\r\n          p.release = Math.max(p.release + e.movementX / 100, 0);\r\n        }\r\n      }\r\n      if (\r\n        this.is_attack_down ||\r\n        this.is_decay_down ||\r\n        this.is_sustain_down ||\r\n        this.is_release_down\r\n      ) {\r\n        this.synths.list.forEach((synth) => {\r\n          synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n        });\r\n      }\r\n    },\r\n    handleMouseUp() {\r\n      /*if (this.isDragging) {\r\n        console.log(this.tempEvent.target)\r\n        this.isDragging = false\r\n      }*/\r\n      console.log(\"mouseUp\");\r\n      this.is_attack_down = false;\r\n      this.is_decay_down = false;\r\n      this.is_sustain_down = false;\r\n      this.is_release_down = false;\r\n    },\r\n    attack_down() {\r\n      if (!this.is_attack_down) this.is_attack_down = true;\r\n    },\r\n    decay_down() {\r\n      if (!this.is_decay_down) this.is_decay_down = true;\r\n    },\r\n    sustain_down() {\r\n      if (!this.is_sustain_down) this.is_sustain_down = true;\r\n    },\r\n    release_down() {\r\n      if (!this.is_release_down) this.is_release_down = true;\r\n    },\r\n  },\r\n  computed: {\r\n    adsr() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let release = this.parameters.release;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      let len_r = (release / duration) * (100 - sustain / duration);\r\n      let len_b =\r\n        ((duration - (attack + sustain + decay + release)) / duration) * 100;\r\n\r\n      return {\r\n        display: \"grid\",\r\n        gridTemplateColumns:\r\n          +len_a.toFixed(1) +\r\n          \"% \" +\r\n          len_d.toFixed(1) +\r\n          \"% \" +\r\n          (sustain / duration) * 100 +\r\n          \"% \" +\r\n          len_r.toFixed(1) +\r\n          \"0% \" +\r\n          len_b.toFixed(2) +\r\n          \"% \",\r\n        gridTemplateRows: \"88% 12%\",\r\n      };\r\n    },\r\n    attack() {\r\n      return {\r\n        height: \"100%\",\r\n        width: \"101%\",\r\n        clipPath: \"polygon(0% 100%, 100% 0%, 100% 100%)\",\r\n      };\r\n    },\r\n    attack_Color() {\r\n      return {\r\n        height: \"100%\",\r\n        background: colors.red.dark,\r\n      };\r\n    },\r\n    decay() {\r\n      return {\r\n        display: \"grid\",\r\n        gridTemplateRows:\r\n          (1 - this.parameters.sustain) * 100 +\r\n          \"% \" +\r\n          this.parameters.sustain * 100 +\r\n          \"%\",\r\n        height: \"100%\",\r\n      };\r\n    },\r\n    decay_head() {\r\n      return {\r\n        background: colors.red.medium,\r\n        clipPath: \"polygon(0% 0%, 100% 100%, 0% 100%)\",\r\n        height: \"101%\",\r\n        width: \"100%\",\r\n      };\r\n    },\r\n    decay_Color() {\r\n      return {\r\n        height: \"100%\",\r\n        background: colors.red.medium,\r\n      };\r\n    },\r\n    sustain() {\r\n      return {\r\n        display: \"grid\",\r\n        gridTemplateRows:\r\n          (1 - this.parameters.sustain) * 100 +\r\n          \"% \" +\r\n          this.parameters.sustain * 100 +\r\n          \"%\",\r\n        height: \"100%\",\r\n      };\r\n    },\r\n    sustain_head() {\r\n      return {\r\n        background: \"transparent\",\r\n      };\r\n    },\r\n    sustain_Color() {\r\n      return {\r\n        height: \"100%\",\r\n        background: colors.red.light,\r\n      };\r\n    },\r\n    release() {\r\n      return {\r\n        height: \"100%\",\r\n        clipPath:\r\n          \"polygon(0% \" +\r\n          (1 - this.parameters.sustain) * 100 +\r\n          \"%, 0% 100%, 100% 100%)\",\r\n      };\r\n    },\r\n    release_Color() {\r\n      return {\r\n        height: \"100%\",\r\n        background: colors.red.glow,\r\n      };\r\n    },\r\n    space() {\r\n      return {\r\n        background: \"transparent\",\r\n      };\r\n    },\r\n    attack_area() {\r\n      let attack = this.parameters.attack;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * 100 - sustain / duration;\r\n      return {\r\n        background: \"transparent\",\r\n        aspectRatio: \"1/1\",\r\n        width: \"10%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_a - 5 + \"%\",\r\n        clipPath: \"circle(80%)\",\r\n      };\r\n    },\r\n    decay_area() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      return {\r\n        background: \"transparent\",\r\n        aspectRatio: \"1/1\",\r\n        width: \"10%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_d + len_a - 5 + \"%\",\r\n        top: (1 - this.parameters.sustain) * 100 - 20 + \"%\",\r\n      };\r\n    },\r\n    sustain_area() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let release = this.parameters.release;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      let len_r = (release / duration) * (100 - sustain / duration);\r\n      return {\r\n        background: \"transparent\",\r\n        aspectRatio: \"16/9\",\r\n        width: \"10%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_a + len_d + (sustain / duration) * 100 - 5 + \"%\",\r\n        top: (1 - this.parameters.sustain) * 100 - 12 + \"%\",\r\n      };\r\n    },\r\n    release_area() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let release = this.parameters.release;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      let len_r = (release / duration) * (100 - sustain / duration);\r\n\r\n      return {\r\n        background: \"transparent\",\r\n        aspectRatio: \"1/1\",\r\n        width: \"10%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_a + len_d + (sustain / duration) * 100 + len_r - 5 + \"%\",\r\n        top: \"70%\",\r\n      };\r\n    },\r\n    attack_dot() {\r\n      let attack = this.parameters.attack;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * 100 - sustain / duration;\r\n      return {\r\n        background: colors.red.dark,\r\n        aspectRatio: \"1/1\",\r\n        width: \"2%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_a - 1 + \"%\",\r\n        top: \"-2%\",\r\n      };\r\n    },\r\n    decay_dot() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      return {\r\n        background: colors.red.medium,\r\n        aspectRatio: \"1/1\",\r\n        width: \"2%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_d + len_a - 1 + \"%\",\r\n        top: (1 - this.parameters.sustain) * 88 - 2 + \"%\",\r\n      };\r\n    },\r\n    sustain_line() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let release = this.parameters.release;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      let len_r = (release / duration) * (100 - sustain / duration);\r\n      return {\r\n        background: colors.gray.dark,\r\n        aspectRatio: \"16/9\",\r\n        width: \"1.8%\",\r\n        aspectRatio: \"1/1\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_a + len_d + (sustain / duration) * 100 - 5 + \"%\",\r\n        top: (1 - this.parameters.sustain) * 88 - 2 + \"%\",\r\n      };\r\n    },\r\n    release_dot() {\r\n      let attack = this.parameters.attack;\r\n      let decay = this.parameters.decay;\r\n      let release = this.parameters.release;\r\n      let sustain = 0.2;\r\n      let len_a = (attack / duration) * (100 - sustain / duration);\r\n      let len_d = (decay / duration) * (100 - sustain / duration);\r\n      let len_r = (release / duration) * (100 - sustain / duration);\r\n\r\n      return {\r\n        background: colors.red.glow,\r\n        aspectRatio: \"1/1\",\r\n        width: \"2%\",\r\n        position: \"absolute\",\r\n        zIndex: \"2\",\r\n        borderRadius: \"50%\",\r\n        left: len_a + len_d + (sustain / duration) * 100 + len_r - 1 + \"%\",\r\n        top: \"84%\",\r\n      };\r\n    },\r\n\r\n    time_Stretch() {\r\n      return {};\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.envelope_container {\r\n  position: absolute;\r\n  height: 9.6vw;\r\n  width: 29.25vw;\r\n  top: 0.5vw;\r\n  left: 0.5vw;\r\n}\r\n\r\n.container {\r\n  position: relative;\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.envelope {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.knobs {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: white;\r\n  box-sizing: border-box;\r\n  display: grid;\r\n  left: 29.25vw;\r\n  width: 17.5vw;\r\n  grid-template-rows: repeat(3, 1fr);\r\n  grid-template-columns: repeat(3, 1fr);\r\n}\r\n\r\n.knob {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0.1vw solid black;\r\n  border-radius: 0.5vw;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.envHost {\r\n  grid-column: span 2;\r\n  /* takes 2 spaces horizontally*/\r\n  background-color: #9bf6ff;\r\n  position: relative;\r\n}\r\n\r\n.env_background {\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.env_canvas {\r\n  height: 0;\r\n  width: 0;\r\n  left: 1%;\r\n  background-color: #cdfbff;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #141f20;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./Envelope.vue?vue&type=template&id=3268d948&scoped=true\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js\"\n\nimport \"./Envelope.vue?vue&type=style&index=0&id=3268d948&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3268d948\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"buttonList\">\r\n        <div\r\n        v-for=\"button in buttonList\"\r\n        :key=\"button.id\"\r\n        :ref=\"button.ref\"\r\n        class=\"button\"\r\n        \r\n      >\r\n        <div class=\"identifier\" @click=\"handleClick(button.id)\" >{{ button.id }}</div>\r\n        <div class=\"draggableArea\" @mousedown=\"handleMouseDown(button.id)\">X</div>\r\n      </div>\r\n    </div>\r\n      \r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  props: [\"nModulators\"],\r\n  data() {\r\n    return {\r\n      buttonList: [],\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    for (let i = 0; i < this.nModulators; i++) this.buttonList.push({ id: i, ref: \"button\" + i });\r\n  },\r\n\r\n  methods: {\r\n    handleClick(id) {\r\n      this.$emit(\"selection\", id);\r\n    },\r\n    handleMouseDown(id) {\r\n      //handles dragging on draggable area of selection\r\n      this.$emit(\"dragging\", id);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.button {\r\n    display:grid;\r\n    grid-template-columns: 60% 40%;\r\n    flex:1;\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 0.2vw solid black;\r\n    border-radius: 0.5vw;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n}\r\n.buttonList{\r\n    display: flex;\r\n    flex-basis: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.identifier{\r\n  border-radius: 0.5vw;\r\n  border: 0.1vw solid black;\r\n  box-sizing: border-box;\r\n}\r\n.draggableArea{\r\n  border-radius: 0.5vw;\r\n  border: 0.1vw solid black;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./ModSelector.vue?vue&type=template&id=8997112a&scoped=true\"\nimport script from \"./ModSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ModSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ModSelector.vue?vue&type=style&index=0&id=8997112a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8997112a\"]])\n\nexport default __exports__","import { render } from \"./ModHost.vue?vue&type=template&id=57c6f4c9&scoped=true\"\nimport script from \"./ModHost.vue?vue&type=script&lang=js\"\nexport * from \"./ModHost.vue?vue&type=script&lang=js\"\n\nimport \"./ModHost.vue?vue&type=style&index=0&id=57c6f4c9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57c6f4c9\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"span\" @mouseleave=\"handleMouseLeave\">\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct1\"\r\n        :octaveNumber=\"1\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct2\"\r\n        :octaveNumber=\"2\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct3\"\r\n        :octaveNumber=\"3\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <MIDIKeyboard @MIDIDown=\"handleMIDIDown\" @MIDIUp=\"handleMIDIUp\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MIDIKeyboard from \"./MIDIKeyboard.vue\";\r\nimport Octave from \"./Octave.vue\";\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  name: \"PianoKeyboard\",\r\n  components: {\r\n    Octave,\r\n    MIDIKeyboard,\r\n  },\r\n  data() {\r\n    return {\r\n      //From here we can transpose the whole keyboard by octaves\r\n      ocTranspose: 1,\r\n      // Object to track which keys are currently being held down\r\n      keysDown: {},\r\n      keys: \"awsedftgyhujkolp\",\r\n      notes: [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"],\r\n      //Transposition amount (in octaves) for the computer keyboard\r\n      keyboardTranspose: 0,\r\n      mouseDown: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    // Add keydown and keyup event listeners to the window object\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n    window.addEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n  beforeDestroy() {\r\n    // Remove keydown and keyup event listeners from the window object\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n    window.removeEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n\r\n  methods: {\r\n    handleMouseUp(){\r\n      this.mouseDown = false\r\n    },\r\n    handleKeyDown(event) {\r\n      // If the key is not currently being held down, handle the keydown event\r\n      if (!this.keysDown[event.key] && this.keys.includes(event.key)) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteDown(note, 2 + octave + this.keyboardTranspose, 100);\r\n        // Set keyDown flag to true\r\n        this.keysDown[event.key] = true;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorPress(note);\r\n      }\r\n      // Change octave of computer keyboard with z or x\r\n      if (!this.keysDown[event.key] && event.key == \"z\") {\r\n        this.keyboardTranspose = this.keyboardTranspose - 1;\r\n      }\r\n      if (!this.keysDown[event.key] && event.key == \"x\") {\r\n        this.keyboardTranspose = this.keyboardTranspose + 1;\r\n      }\r\n    },\r\n    handleKeyUp(event) {\r\n      // If the key is currently being held down, handle the keyup event\r\n      if (this.keysDown[event.key]) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteUp(note, 2 + octave + this.keyboardTranspose);\r\n        // Set keyDown flag to false\r\n        this.keysDown[event.key] = false;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorRelease(note);\r\n      }\r\n    },\r\n    handleMIDIDown(note, octave, velocity) {\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorPress(note);\r\n      this.synths.list.forEach(synth => {\r\n        console.log(\"Play note: \"+(note+octave)+\" at velocity: \"+velocity+\" from MIDI\")\r\n        synth.playNote(note+octave, velocity);\r\n      });\r\n      this.$emit(\"noteDown\", note)\r\n    },\r\n    handleMIDIUp(note, octave) {\r\n      //console.log(\"MIDI released \"+note+octave)\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorRelease(note);\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+octave);\r\n      });    \r\n    },\r\n\r\n    handleNoteDown(note, octave, velocity = 100) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" pressed\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.playNote(note+finalOctave, velocity);\r\n        //console.log(synth)\r\n      });\r\n      \r\n      this.$emit(\"noteDown\", note+finalOctave)\r\n    },\r\n    handleNoteUp(note, octave) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" released\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+finalOctave);\r\n      });\r\n    },\r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  background-color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n}\r\n\r\n.span {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  grid-row: 3;\r\n  grid-column: span 3;\r\n}\r\n</style>","<template>\r\n</template>\r\n\r\n<script>\r\nexport default ({\r\n  data() {\r\n    return {\r\n      midiAccess: null,\r\n      midiInput: null,\r\n      notes: [ \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\" ],\r\n      lowestOctave: -2,\r\n    };\r\n  },\r\n  mounted() {\r\n    navigator.requestMIDIAccess()\r\n      .then((midiAccess) => {\r\n        if(midiAccess.inputs.size>0){\r\n            this.midiAccess = midiAccess;\r\n            this.midiInput = midiAccess.inputs.values().next().value;\r\n            console.log(this.midiInput);\r\n            this.midiInput.addEventListener('midimessage', this.handleMidiMessage)\r\n        }else{\r\n            console.log('There are no MIDI inputs available, if you need MIDI, reload the page with a MIDI keyboard connected');\r\n        }\r\n        \r\n      });\r\n  },\r\n  methods: {\r\n    handleMidiMessage(event){\r\n        let [status, note, velocity] = event.data;\r\n        let label = this.notes[note%12]\r\n        let octave = (this.lowestOctave+parseInt(note/12,10))\r\n        if (status == 144) {\r\n            //console.log(`Keydown: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIDown\", label, octave, velocity);\r\n        } else if (status == 128) {\r\n            //console.log(`Keyup: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIUp\", label, octave);\r\n        }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./MIDIKeyboard.vue?vue&type=template&id=290ce92e\"\nimport script from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"octave\" @mousedown=\"handleMouseDown\" @mouseup=\"handleMouseUp\"  @mouseover=\"handleMouseOver\">\r\n        <div class=\"woctave\">\r\n            <div id=\"C\" ref=\"C\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"D\" ref=\"D\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"E\" ref=\"E\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"F\" ref=\"F\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"G\" ref=\"G\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"A\" ref=\"A\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"B\" ref=\"B\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n        </div>\r\n        <div class=\"boctave\">\r\n            <div id=\"C#\" ref=\"Cs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 3 / 5\"></div>\r\n            <div id=\"D#\" ref=\"Ds\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 6 / 8\"></div>\r\n            <div id=\"F#\" ref=\"Fs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 12 / 14\"></div>\r\n            <div id=\"G#\" ref=\"Gs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 15 / 17\"></div>\r\n            <div id=\"A#\" ref=\"As\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 18 / 20\"></div>\r\n        </div>   \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Octave\",\r\n    props: {\r\n        octaveNumber: Number,\r\n    },\r\n        data() {\r\n        return {\r\n        }\r\n    },\r\n    methods: {\r\n        handleMouseLeave(e){\r\n            if(this.$parent.mouseDown){\r\n                this.notifyUp(e.currentTarget)\r\n            }    \r\n        },\r\n        handleMouseUp(e) {\r\n            this.$parent.mouseDown= false;\r\n            this.notifyUp(e.target)\r\n            //console.log(\"mouse is now up\")\r\n        },\r\n        handleMouseDown(e) {\r\n            this.$parent.mouseDown= true;\r\n            this.notifyDown(e.target)\r\n            //console.log(\"mouse is now down\")\r\n        },\r\n        handleMouseOver(e){\r\n            if(this.$parent.mouseDown){\r\n                //console.log(e.target)\r\n                this.notifyDown(e.target)\r\n\r\n            }\r\n            //console.log(\"mouseDown is \"+this.$parent.mouseDown+\" and is moving\")\r\n        },\r\n        notifyDown(key){\r\n            //emitting cusom event \"keyDown\"\r\n            this.$emit(\"virtualKeyDown\",key.id,this.octaveNumber)\r\n            this.switchColorPress(key.id)\r\n        },\r\n        switchColorPress(note){\r\n            if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n            }\r\n            let key = this.$refs[note];\r\n            //change color of key when pressed\r\n            if (key.classList.contains('wkey')){\r\n                key.classList.remove(\"wUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }else{\r\n                key.classList.remove(\"bUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }     \r\n        },\r\n        notifyUp(key){\r\n            //emitting cusom event \"keyUp\"\r\n            this.$emit(\"virtualKeyUp\",key.id,this.octaveNumber)\r\n            this.switchColorRelease(key.id)\r\n            //not needed, called in PianoKeyboard (when clicking with the mouse on keyboard all keys are released (color))\r\n        },\r\n        switchColorRelease(note){\r\n            if(note === \"all\"){\r\n                for (const ref of Object.values(this.$refs)) {\r\n                    if (ref.classList.contains('wkey')){\r\n                        ref.classList.add(\"wUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }else{\r\n                        ref.classList.add(\"bUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }\r\n                }  \r\n            }else{\r\n                if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n                }\r\n                let key = this.$refs[note];\r\n                //change color of key when released\r\n                if (key.classList.contains('wkey')){\r\n                    key.classList.add(\"wUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }else{\r\n                    key.classList.add(\"bUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n    .octave{\r\n        width: 100%;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        position:relative;   \r\n    }\r\n    .woctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;      \r\n    }\r\n    .boctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        display: grid;\r\n        grid-template-columns: repeat(21, 1fr);  \r\n        grid-template-rows: 100%;  \r\n    }\r\n    .wkey{\r\n        width: 100%;\r\n        height: 100%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        z-index: 1;\r\n    }\r\n    .wUnpressed{\r\n        background-color:white;\r\n    }\r\n    .bUnpressed{\r\n        background-color:black;\r\n    }\r\n    .pressed{\r\n        background-color:darkgrey;\r\n    }\r\n    .bkey{\r\n        width: 100%;\r\n        height: 60%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        position: relative;\r\n        z-index: 1;\r\n    }\r\n    \r\n\r\n</style>","import { render } from \"./Octave.vue?vue&type=template&id=4c5102eb\"\nimport script from \"./Octave.vue?vue&type=script&lang=js\"\nexport * from \"./Octave.vue?vue&type=script&lang=js\"\n\nimport \"./Octave.vue?vue&type=style&index=0&id=4c5102eb&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PianoKeyboard.vue?vue&type=template&id=41dda37d\"\nimport script from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\n\nimport \"./PianoKeyboard.vue?vue&type=style&index=0&id=41dda37d&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./MainHost.vue?vue&type=template&id=4dfe0520\"\nimport script from \"./MainHost.vue?vue&type=script&lang=js\"\nexport * from \"./MainHost.vue?vue&type=script&lang=js\"\n\nimport \"./MainHost.vue?vue&type=style&index=0&id=4dfe0520&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\Actam projects\\\\Vue\\\\actamVue\\\\actamVue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport MainHost from '../views/MainHost.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'synth',\r\n    component: MainHost\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'about',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue')\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nconst app = createApp(App).use(router)\r\n\r\n//global properties\r\n\r\n//audio\r\napp.config.globalProperties.synths = {\r\n    list: []\r\n}\r\n\r\napp.config.globalProperties.nFilterChains = 3\r\napp.config.globalProperties.nFiltersXchain = 3\r\napp.config.globalProperties.areFiltersMounted = false\r\n\r\napp.config.globalProperties.nFxChains = 4\r\napp.config.globalProperties.nFxXchain = 5\r\napp.config.globalProperties.areFxMounted = false\r\n\r\napp.config.globalProperties.nModulators = 3\r\napp.config.globalProperties.nEnvelopes = 3\r\napp.config.globalProperties.nLFO = 3\r\napp.config.globalProperties.polyphonyVoices = 16\r\n\r\n// init filters global matrix\r\napp.config.globalProperties.filterChains = Array(app.config.globalProperties.nFilterChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFilterChains; i++) {\r\n    app.config.globalProperties.filterChains[i] = Array(app.config.globalProperties.nFiltersXchain)\r\n}\r\n\r\n// init fx global matrix\r\napp.config.globalProperties.fxChains = Array(app.config.globalProperties.nFxChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFxChains; i++) {\r\n    app.config.globalProperties.fxChains[i] = Array(app.config.globalProperties.nFxXchain+1)\r\n}\r\n// console.log(app.config.globalProperties.fxChains)\r\n\r\n\r\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + \"about\" + \".\" + \"621be761\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"actam:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkactam\"] = self[\"webpackChunkactam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4471); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createElementVNode","_createVNode","_component_router_link","to","_component_router_view","mounted","__exports__","render","class","_createElementBlock","onMouseup","$options","onMousemove","_hoisted_1","_component_OscHost","ref","onClaim","_component_FilterHost","onFilterInitialized","_component_FxHost","_component_ToolHost","_component_ModHost","onInitADSR","_ctx","onDragging","_component_PianoKeyboard","onNoteDown","onNoteUp","_hoisted_2","_Fragment","oscList","osc","_createBlock","_component_Osc","id","onDisposed","onClick","length","src","_imports_0","alt","_imports_1","_imports_2","_imports_3","style","type_button","type_text","$data","this","oscTypeIndex","mod_area","volume_area","pitch_slider","_hoisted_3","mod_slider","volume_slider","_hoisted_4","_hoisted_5","pitch_hand","onMousedown","osc_wave","oscWaveIndex","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","onChainclick","_hoisted_11","max_partials_num","vol_damp_factor","MyPolySynth","constructor","synthType","destination","nVoices","modulatorsData","envelope","vol","amount","parameters","attack","decay","sustain","release","mod","pitch","pan","lfo","frequency","min","max","synthPreset","type","waveform","transpose","partials","dampNode","Gain","console","log","Tone","gainNode","allVoices","freeVoices","busyVoices","lastNotes","Array","initVoices","connect","error","index","modulators","signal","gain","synth","createSynth","oscillator","disconnect","dispose","voice","target","tempMod","createModulator","connectModulator","push","initialized","updateModulators","playNote","note","velocity","lastNote","shift","cancel","triggerAttack","stop","start","stopNote","triggerRelease","setTimeout","Synth","nextTick","set","Envelope","LFO","forEach","modulatorSetter","updateSynths","modulator","setModulatorParameters","setModulatorAmount","setParameters","volume","modulation","toFixed","toString","route","disconnectDispose","wave_types","osc_types","colors","red","light","medium","dark","glow","yellow","green","gray","blue","components","SineIcon","SquareIcon","TriangleIcon","SawtoothIcon","data","PLACEHOLDERCOLOR","maxPitch","minPitch","waveform_btn_style","wave_icon_size","is_modulationDown","is_volumeDown","is_pitchDown","chain_routes","tempModulator","props","document","addEventListener","onMouseMove","onMouseUp","window","resizeGraphics","polyphonyVoices","synths","list","initConnections","computed","osc_container","background","fontSize","color","transform","backgroundColor","borderLeft","chain_buttons","button_1","button_2","button_3","methods","$emit","splice","indexOf","filterChains","width","body","clientWidth","e","event","movementY","Math","gainToDb","movementX","floor","modulationDown","volumeDown","pitchDown","handleDrop","path","unshift","nextOscType","nextWaveform","unmounted","removeEventListener","Osc","name","i","addOsc","key","$refs","toRaw","handleClaim","info","removeOsc","chainList","chain","_component_FilterChain","filterList","filter","_component_Filter","chainId","filter_type","chainColor","onFiltersMounted","handleFiltersMounted","resonance","cutoff","is_logoDown","initFilterParams","nFiltersXchain","nFilterChains","setResonance","setCutoff","cursor","logoDown","cutoffLogMapping","x","pow","log10","resonanceRangeNormalizer","self","Q","getFilter","computedHeadStyle","left","computedGlow","opacity","computedLP","computedHP","computedBDMaks","clip","clipPath","computedBD","height","computedBDCircle","filterTypes","Filter","nFilters","head","chainHead","$props","nFxChains","fxChains","FilterChain","fx","_component_FxCell","item","onFxMounted","initFxConnections","_imports_4","_imports_5","typeId","MyEffect","effect","generateToneFx","modulatorsPreset","getToneReference","createReverb","createDelay","createDistortion","createVibrato","createPan","createChorus","modulateFxParams","wet","delayTime","feedback","distortion","depth","coeff","freq","reverb","Reverb","delay","PingPongDelay","Distortion","vibrato","Vibrato","Panner","chorus","Chorus","spread","types","is_down","nFxXchain","computedGlowStyle","isSVGTag","nextFx","generateNextTypeIndex","fxType","changeFxType","getDestination","generateRandomTypeIndex","round","random","setToBypass","fxDown","FxCell","Fx_chain1","Fx_chain2","Fx_chain3","Fx_chain4","j","setChainVolume","rampTo","_component_SpecAnalyzer","_component_Oscilloscope","_component_Meter","widthLeft","widthRight","computedWidthLeft","computedWidthRight","meter","Meter","channels","intervalId","setInterval","updateWidths","leftVolume","rightVolume","getValue","isFinite","dbToGain","beforeDestroy","clearInterval","oscilloscopeData","timing","oscilloscope","startOscilloscope","canvas","offsetWidth","offsetHeight","ctx","getContext","setTiming","updateOscilloscopeData","draw","clearRect","strokeStyle","lineWidth","beginPath","y","moveTo","lineTo","stroke","analyser","canvasCtx","startAnalyzer","value","fillStyle","fillRect","Oscilloscope","SpecAnalyzer","setOscilloscopeTiming","mseconds","_component_Envelope","_component_ModSelector","nModulators","onSelection","adsr","attack_Color","decay_head","decay_Color","sustain_head","sustain_Color","release_Color","time_Stretch","knob","duration","tempEvent","knobList","is_attack_down","is_decay_down","is_sustain_down","is_release_down","attackCurve","decayCurve","releaseCurve","scale","unHide","container","classList","remove","hide","add","handleMouseMove","isDragging","p","handleMouseUp","attack_down","decay_down","sustain_down","release_down","len_a","len_d","len_r","len_b","display","gridTemplateColumns","gridTemplateRows","space","attack_area","aspectRatio","position","zIndex","borderRadius","decay_area","top","sustain_area","release_area","attack_dot","decay_dot","sustain_line","release_dot","button","buttonList","handleClick","handleMouseDown","ModSelector","selection","modulatorList","created","Modulators","changeSelection","handleDragging","draggedId","modType","modParam","params","onMouseleave","_component_Octave","octaveNumber","onVirtualKeyDown","onVirtualKeyUp","_component_MIDIKeyboard","onMIDIDown","onMIDIUp","midiAccess","midiInput","notes","lowestOctave","navigator","requestMIDIAccess","then","inputs","size","values","next","handleMidiMessage","status","label","octave","parseInt","onMouseover","Number","handleMouseLeave","$parent","mouseDown","notifyUp","currentTarget","notifyDown","handleMouseOver","switchColorPress","includes","replace","contains","switchColorRelease","Object","Octave","MIDIKeyboard","ocTranspose","keysDown","keys","keyboardTranspose","handleKeyDown","handleKeyUp","handleNoteDown","handleNoteUp","handleMIDIDown","handleMIDIUp","finalOctave","OscHost","FilterHost","FxHost","ToolHost","ModHost","PianoKeyboard","draggedInfo","initOscConnections","oscHost","initFilterConnections","deleter","deleteDraggedInfo","source","pianoKeyboard","modHost","noteDownHandle","noteUpHandle","routes","component","MainHost","router","createRouter","history","createWebHistory","process","app","createApp","App","use","config","globalProperties","areFiltersMounted","areFxMounted","nEnvelopes","nLFO","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","reduce","promises","u","miniCssF","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","url","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","appendChild","Symbol","toStringTag","installedChunks","installedChunkData","promise","resolve","reject","Error","loadingEnded","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}